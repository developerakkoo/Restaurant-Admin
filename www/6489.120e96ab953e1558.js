"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6489],{6489:(x,p,c)=>{c.r(p),c.d(p,{ViewPageModule:()=>w});var d=c(177),f=c(4341),a=c(4488),g=c(8986),u=c(467),e=c(4438),m=c(4796);function P(n,l){1&n&&(e.j41(0,"ion-col",4)(1,"ion-text",9)(2,"h1"),e.EFF(3,"No Data to Load!"),e.k0s()()())}function _(n,l){if(1&n){const r=e.RV6();e.j41(0,"ion-checkbox",16),e.bIt("ionChange",function(t){e.eBV(r);const i=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.onCheckboxChange(t.detail.checked,i._id))}),e.k0s()}if(2&n){const r=e.XpG().$implicit;e.Y8G("checked",!0===r.compensationPaidToHotelPartner)}}function b(n,l){1&n&&(e.j41(0,"ion-badge",17),e.EFF(1,"PAID"),e.k0s())}function F(n,l){if(1&n&&(e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s(),e.j41(3,"th"),e.EFF(4),e.k0s(),e.j41(5,"th"),e.EFF(6),e.k0s(),e.j41(7,"th"),e.DNE(8,_,1,1,"ion-checkbox",14)(9,b,2,0,"ion-badge",15),e.k0s()()),2&n){const r=l.$implicit;e.R7$(2),e.SpI(" ",r.createdAt," "),e.R7$(2),e.SpI(" ",r.orderId," "),e.R7$(2),e.SpI(" ",null==r.productDetails?null:r.productDetails[0].partnerPrice," "),e.R7$(2),e.Y8G("ngIf",!1===r.compensationPaidToHotelPartner),e.R7$(),e.Y8G("ngIf",!0===r.compensationPaidToHotelPartner)}}function v(n,l){if(1&n&&(e.j41(0,"div",10)(1,"table",11)(2,"thead")(3,"tr")(4,"th",12),e.EFF(5,"Date & Time"),e.k0s(),e.j41(6,"th",12),e.EFF(7,"OrderId"),e.k0s(),e.j41(8,"th",12),e.EFF(9,"Hotel Amount"),e.k0s(),e.j41(10,"th",12),e.EFF(11,"Settelment"),e.k0s()()(),e.j41(12,"tbody"),e.DNE(13,F,10,5,"tr",13),e.k0s()()()),2&n){const r=e.XpG();e.R7$(13),e.Y8G("ngForOf",r.compensationTable)}}const k=[{path:"",component:(()=>{var n;class l{constructor(o,t,i){this.auth=o,this.route=t,this.loadingController=i,this.startDate="",this.endDate="",this.page=1,this.partnerDetails={},this.compensationTable=[],this.selectedItems=new Set,this.totalPartnerPrice=0,this.partnerId=this.route.snapshot.paramMap.get("id")}ngOnInit(){}ionViewDidEnter(){this.getPartnerDetails()}setDateEvent(o,t){console.log(o.detail.value),console.log(t);let i=o.detail.value;"s"===t?(console.log("Set Start Date"),this.startDate=i):"e"===t&&(console.log("Set End Date"),this.endDate=i),console.log(this.startDate),console.log(this.endDate),this.getTable()}getPartnerDetails(){var o=this;return(0,u.A)(function*(){let t=yield o.loadingController.create({message:"Loading...",duration:5e3});var i;yield t.present(),o.auth.getPartnerById(o.partnerId).subscribe({next:(i=(0,u.A)(function*(s){console.log(s),yield t.dismiss(),o.getHotelByPartner()}),function(h){return i.apply(this,arguments)}),error:function(){var i=(0,u.A)(function*(s){console.log(s),yield t.dismiss()});return function(h){return i.apply(this,arguments)}}()})})()}getHotelByPartner(){var t,o=this;this.auth.getAllHotelsPartner(this.partnerId).subscribe({next:(t=(0,u.A)(function*(i){console.log(i),o.hotelId=i.data[0]._id,o.getTable()}),function(s){return t.apply(this,arguments)}),error:function(){var t=(0,u.A)(function*(i){console.log(i)});return function(s){return t.apply(this,arguments)}}()})}getTable(){var t,o=this;this.auth.getPartnerCompensationTable(this.hotelId,this.startDate,this.endDate,this.page).subscribe({next:(t=(0,u.A)(function*(i){console.log(i),o.compensationTable=i.data.content}),function(s){return t.apply(this,arguments)}),error:function(){var t=(0,u.A)(function*(i){console.log(i)});return function(s){return t.apply(this,arguments)}}()})}onCheckboxChange(o,t){o?this.selectedItems.add(t):this.selectedItems.delete(t),console.log(this.selectedItems),this.calculateTotalPartnerPrice()}calculateTotalPartnerPrice(){this.totalPartnerPrice=0,this.compensationTable.forEach(o=>{this.selectedItems.has(o._id)&&o.productDetails.forEach(t=>{this.totalPartnerPrice+=t.partnerPrice})})}updateSettelment(){var o=this;const t=[...this.selectedItems];console.log(t);let i={orderIds:t,compensationPaidToHotelPartner:!0};var s;console.log(i),this.auth.updateSettlements(i).subscribe({next:(s=(0,u.A)(function*(h){console.log(h),o.getPartnerDetails()}),function(D){return s.apply(this,arguments)}),error:function(){var s=(0,u.A)(function*(h){console.log(h)});return function(D){return s.apply(this,arguments)}}()})}}return(n=l).\u0275fac=function(o){return new(o||n)(e.rXU(m.u),e.rXU(g.nX),e.rXU(a.Xi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-view"]],decls:38,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],["size","6"],["size","12",4,"ngIf"],["size","12"],["type","date","label","Start Date","labelPlacement","stacked","fill","outline","placeholder","Awesome Input",2,"width","200px","--height","40px",3,"ionChange"],["type","date","label","End Date","labelPlacement","stacked","fill","outline","placeholder","Awesome Input",2,"width","200px","--height","40px",3,"ionChange"],["class","table-responsive",4,"ngIf"],["expand","block","fill","clear","shape","round",3,"click"],["color","primary",1,"ion-text-center"],[1,"table-responsive"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"checked","ionChange",4,"ngIf"],["color","primary","mode","ios",4,"ngIf"],[3,"ionChange","checked"],["color","primary","mode","ios"]],template:function(o,t){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Partner Details"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-grid")(6,"ion-row")(7,"ion-col",2)(8,"ion-card")(9,"ion-list")(10,"ion-list-header")(11,"ion-label"),e.EFF(12,"Recent Partner Orders"),e.k0s(),e.j41(13,"ion-button"),e.EFF(14,"See All"),e.k0s()()()()(),e.j41(15,"ion-col",2)(16,"ion-card")(17,"ion-list")(18,"ion-list-header")(19,"ion-label"),e.EFF(20,"Recent Partner Reviews"),e.k0s(),e.j41(21,"ion-button"),e.EFF(22,"See All"),e.k0s()()()()()(),e.j41(23,"ion-row"),e.DNE(24,P,4,0,"ion-col",3),e.j41(25,"ion-col",4)(26,"ion-list-header")(27,"ion-label"),e.EFF(28,"Settlement Table"),e.k0s(),e.j41(29,"ion-input",5),e.bIt("ionChange",function(s){return t.setDateEvent(s,"s")}),e.k0s(),e.j41(30,"ion-input",6),e.bIt("ionChange",function(s){return t.setDateEvent(s,"e")}),e.k0s()(),e.DNE(31,v,14,1,"div",7),e.k0s()()()(),e.j41(32,"ion-footer")(33,"ion-toolbar")(34,"ion-title"),e.EFF(35),e.k0s(),e.j41(36,"ion-button",8),e.bIt("click",function(){return t.updateSettelment()}),e.EFF(37," Mark Settelments as Completed "),e.k0s()()()),2&o&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(20),e.Y8G("ngIf",t.compensationTable.length<=0),e.R7$(7),e.Y8G("ngIf",t.compensationTable.length>0),e.R7$(4),e.JRh(t.totalPartnerPrice))},dependencies:[d.Sq,d.bT,a.In,a.Jm,a.b_,a.eY,a.hU,a.W9,a.M0,a.lO,a.eU,a.$w,a.he,a.nf,a.AF,a.ln,a.IO,a.BC,a.ai,a.hB,a.Gw]}),l})()}];let I=(()=>{var n;class l{}return(n=l).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.iI.forChild(k),g.iI]}),l})(),w=(()=>{var n;class l{}return(n=l).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.MD,f.YN,a.bv,I]}),l})()}}]);