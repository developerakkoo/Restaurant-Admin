"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4347],{4347:(T,h,o)=>{o.r(h),o.d(h,{ViewPageModule:()=>w});var u=o(177),f=o(4341),l=o(4488),c=o(8986),p=o(467),e=o(4438),E=o(4796);const v=(r,a)=>({"bg-success":r,"bg-danger":a}),b=(r,a,s,t,i)=>({"bi-check-circle text-success":r,"bi-person-check text-primary":a,"bi-box-seam text-warning":s,"bi-truck text-info":t,"bi-hourglass-split text-muted":i});function k(r,a){if(1&r){const s=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"h5",8),e.EFF(4,"Delivery Agent"),e.k0s(),e.j41(5,"button",9),e.bIt("click",function(){e.eBV(s);const i=e.XpG();return e.Njj(i.viewDetails("delivery"))}),e.nrm(6,"i",10),e.EFF(7," View "),e.k0s()(),e.j41(8,"div",11)(9,"p")(10,"strong"),e.EFF(11,"Name:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p")(14,"strong"),e.EFF(15,"Phone:"),e.k0s(),e.EFF(16),e.k0s()()()()}if(2&r){const s=e.XpG();e.R7$(12),e.Lme(" ",null==s.assignedDeliveryBoy?null:s.assignedDeliveryBoy.firstName," ",null==s.assignedDeliveryBoy?null:s.assignedDeliveryBoy.lastName,""),e.R7$(4),e.SpI(" ",null==s.assignedDeliveryBoy?null:s.assignedDeliveryBoy.phoneNumber,"")}}function D(r,a){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"span",37),e.EFF(5),e.nI1(6,"titlecase"),e.k0s()(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s()()),2&r){const s=a.$implicit;e.R7$(2),e.JRh(s.dishId.name),e.R7$(2),e.Y8G("ngClass",e.l_i(8,v,"veg"===s.dishId.dishType,"non-veg"===s.dishId.dishType)),e.R7$(),e.SpI(" ",e.bMT(6,6,s.dishId.dishType)," "),e.R7$(3),e.JRh(s.quantity),e.R7$(2),e.SpI("\u20b9",s.dishId.userPrice,""),e.R7$(2),e.SpI("\u20b9",s.dishId.userPrice*s.quantity,"")}}function y(r,a){if(1&r&&(e.j41(0,"li",38)(1,"span",39),e.nrm(2,"i",40),e.k0s(),e.j41(3,"div")(4,"strong",41),e.EFF(5),e.k0s(),e.j41(6,"div",42),e.EFF(7),e.k0s()()()),2&r){const s=a.$implicit;e.R7$(2),e.Y8G("ngClass",e.s1E(3,b,"DELIVERED"===s.status,"ACCEPTED"===s.status,"PICKUP_CONFIRMED"===s.status,"ASSIGNED"===s.status,"PENDING"===s.status)),e.R7$(3),e.JRh(s.title),e.R7$(2),e.JRh(s.dateTime)}}const I=[{path:"",component:(()=>{var r;class a{constructor(t,i,n){this.auth=t,this.route=i,this.router=n,this.products=[],this.orderTimeline=[],this.partnerEarning=0,this.adminEarning=0,this.isLoading=!1,this.orderId=this.route.snapshot.paramMap.get("id")}ngOnInit(){console.log(""),this.getOrder()}ionViewDidLeave(){this.subscriptions.unsubscribe()}ionViewDidEnter(){}getOrder(){var i,t=this;this.isLoading=!0,this.subscriptions=this.auth.getOrderById(this.orderId).subscribe({next:(i=(0,p.A)(function*(n){console.log("Order Details Detched"),console.log(n),t.orderId=n.data.orderId,t.assignedDeliveryBoy=n.data.assignedDeliveryBoy,t.hotel=n.data.hotelId,t.user=n.data.userId,t.address=n.data.address,t.priceDetails=n.data.priceDetails,t.orderTimeline=n.data.orderTimeline,t.products=n.data.products,t.paymentMode=n.data.paymentMode,t.delivery=n.data.assignedDeliveryBoy._id,t.partner=n.data.hotelId.userId;let d=0,F=0;t.products.forEach(g=>{const m=g.quantity||1;d+=(g.dishId.partnerPrice||0)*m,F+=(g.dishId.userPrice||0)*m});const P=t.priceDetails.platformFee||0,R=t.priceDetails.discount||0;t.partnerEarning=d,t.adminEarning=F-d-R+P,t.partnerEarning=d,t.isLoading=!1}),function(d){return i.apply(this,arguments)}),error:function(){var i=(0,p.A)(function*(n){console.log(n),t.isLoading=!1});return function(d){return i.apply(this,arguments)}}()})}viewDetails(t){console.log(`Viewing details of: ${t}`),"customer"==t?(console.log("customer"),this.router.navigate(["folder","customer","view",this.user._id])):"restaurant"==t?(console.log("restaurant"),this.router.navigate(["folder","partners","view",this.partner])):"delivery"==t&&(console.log("delivery"),this.router.navigate(["folder","delivery-boy","view",this.delivery]))}}return(r=a).\u0275fac=function(t){return new(t||r)(e.rXU(E.u),e.rXU(c.nX),e.rXU(c.Ix))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-view"]],decls:130,vars:19,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],["defaultHref","folder/orders"],[1,"container-fluid"],[1,"row"],[1,"col-md-4","mb-3"],[1,"card","shadow-sm","border-danger","h-100"],[1,"card-header","bg-danger","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"bi","bi-eye"],[1,"card-body"],["class","col-md-4 mb-3",4,"ngIf"],[1,"row","justify-content-center","g-4"],[1,"col-12","col-md-6"],[1,"card","border-light","shadow-sm","h-100"],[1,"card-header","bg-light","text-dark","d-flex","justify-content-between","align-items-center"],[1,"bi","bi-cash-stack","fs-4"],[1,"card-text","fs-6"],[1,"text-dark","ml-2"],[1,"bi","bi-briefcase-fill","fs-4"],[1,"card","shadow-sm","mb-4"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"bi","bi-basket2-fill","fs-5","text-secondary"],[1,"card-body","p-0"],[1,"table","table-hover","table-bordered","mb-0"],[1,"table-secondary"],[4,"ngFor","ngForOf"],[1,"col-md-6","mb-3"],[1,"card","shadow-sm","border-light","h-100"],[1,"card-header","bg-light","text-dark"],[1,"bi","bi-receipt-cutoff","mr-2"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"list-group-item","fw-bold","text-success"],[1,"bi","bi-clock-history","mr-2"],["class","list-group-item d-flex align-items-start",4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"list-group-item","d-flex","align-items-start"],[1,"me-3","fs-4","mr-2"],[1,"bi",3,"ngClass"],[1,"d-block"],[1,"text-muted","small"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",1),e.nrm(5,"ion-back-button",2),e.k0s()()(),e.j41(6,"ion-content")(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"h5",8),e.EFF(13,"Customer Info"),e.k0s(),e.j41(14,"button",9),e.bIt("click",function(){return i.viewDetails("customer")}),e.nrm(15,"i",10),e.EFF(16," View "),e.k0s()(),e.j41(17,"div",11)(18,"p")(19,"strong"),e.EFF(20,"Name:"),e.k0s(),e.EFF(21),e.k0s(),e.j41(22,"p")(23,"strong"),e.EFF(24,"Phone:"),e.k0s(),e.EFF(25),e.k0s(),e.j41(26,"p")(27,"strong"),e.EFF(28,"Address:"),e.k0s(),e.EFF(29),e.k0s()()()(),e.j41(30,"div",5)(31,"div",6)(32,"div",7)(33,"h5",8),e.EFF(34,"Restaurant Info"),e.k0s(),e.j41(35,"button",9),e.bIt("click",function(){return i.viewDetails("restaurant")}),e.nrm(36,"i",10),e.EFF(37," View "),e.k0s()(),e.j41(38,"div",11)(39,"p")(40,"strong"),e.EFF(41,"Name:"),e.k0s(),e.EFF(42),e.k0s(),e.j41(43,"p")(44,"strong"),e.EFF(45,"Address:"),e.k0s(),e.EFF(46),e.k0s(),e.j41(47,"p")(48,"strong"),e.EFF(49,"Payment Mode:"),e.k0s(),e.EFF(50),e.k0s()()()(),e.DNE(51,k,17,3,"div",12),e.k0s(),e.nrm(52,"hr"),e.j41(53,"div",13)(54,"div",14)(55,"div",15)(56,"div",16)(57,"h5",8),e.EFF(58,"Partner Earnings"),e.k0s(),e.nrm(59,"i",17),e.k0s(),e.j41(60,"div",11)(61,"p",18)(62,"strong"),e.EFF(63,"Total Partner Earnings:"),e.k0s(),e.j41(64,"span",19),e.EFF(65),e.k0s()()()()(),e.j41(66,"div",14)(67,"div",15)(68,"div",16)(69,"h5",8),e.EFF(70,"Admin Earnings"),e.k0s(),e.nrm(71,"i",20),e.k0s(),e.j41(72,"div",11)(73,"p",18)(74,"strong"),e.EFF(75,"Total Admin Earnings:"),e.k0s(),e.j41(76,"span",19),e.EFF(77),e.k0s()()()()()(),e.nrm(78,"hr"),e.j41(79,"div",21)(80,"div",22)(81,"h5",8),e.EFF(82,"\u{1f9fe} Ordered Items"),e.k0s(),e.nrm(83,"i",23),e.k0s(),e.j41(84,"div",24)(85,"table",25)(86,"thead",26)(87,"tr")(88,"th"),e.EFF(89,"Dish"),e.k0s(),e.j41(90,"th"),e.EFF(91,"Type"),e.k0s(),e.j41(92,"th"),e.EFF(93,"Qty"),e.k0s(),e.j41(94,"th"),e.EFF(95,"Price"),e.k0s(),e.j41(96,"th"),e.EFF(97,"Total"),e.k0s()()(),e.j41(98,"tbody"),e.DNE(99,D,13,11,"tr",27),e.k0s()()()(),e.nrm(100,"hr"),e.j41(101,"div",4)(102,"div",28)(103,"div",29)(104,"div",30)(105,"h5",8),e.nrm(106,"i",31),e.EFF(107,"Price Summary"),e.k0s()(),e.j41(108,"ul",32)(109,"li",33),e.EFF(110),e.k0s(),e.j41(111,"li",33),e.EFF(112),e.k0s(),e.j41(113,"li",33),e.EFF(114),e.k0s(),e.j41(115,"li",33),e.EFF(116),e.k0s(),e.j41(117,"li",33),e.EFF(118),e.k0s(),e.j41(119,"li",34),e.EFF(120),e.k0s()()()(),e.j41(121,"div",28)(122,"div",29)(123,"div",30)(124,"h5",8),e.nrm(125,"i",35),e.EFF(126,"Order Timeline"),e.k0s()(),e.j41(127,"div",11)(128,"ul",32),e.DNE(129,y,8,9,"li",36),e.k0s()()()()()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(3),e.SpI("Order Id ",i.orderId,""),e.R7$(18),e.SpI(" ",null==i.user?null:i.user.name,""),e.R7$(4),e.SpI(" ",null==i.user?null:i.user.phoneNumber,""),e.R7$(4),e.SpI(" ",null==i.address?null:i.address.address,""),e.R7$(13),e.SpI(" ",null==i.hotel?null:i.hotel.hotelName,""),e.R7$(4),e.SpI(" ",null==i.hotel?null:i.hotel.address,""),e.R7$(4),e.SpI(" ",i.paymentMode,""),e.R7$(),e.Y8G("ngIf",i.assignedDeliveryBoy),e.R7$(14),e.SpI("\u20b9",i.partnerEarning,""),e.R7$(12),e.SpI("\u20b9",i.adminEarning,""),e.R7$(22),e.Y8G("ngForOf",i.products),e.R7$(11),e.SpI("\u{1f4b0} Subtotal: \u20b9",null==i.priceDetails?null:i.priceDetails.subtotal,""),e.R7$(2),e.SpI("\u{1f4c8} GST: \u20b9",null==i.priceDetails?null:i.priceDetails.gstAmount,""),e.R7$(2),e.SpI("\u{1f9fe} Platform Fee: \u20b9",null==i.priceDetails?null:i.priceDetails.platformFee,""),e.R7$(2),e.SpI("\u{1f69a} Delivery Charges: \u20b9",null==i.priceDetails?null:i.priceDetails.deliveryCharges,""),e.R7$(2),e.SpI("\u{1f3f7}\ufe0f Discount: \u20b9",null==i.priceDetails?null:i.priceDetails.discount,""),e.R7$(2),e.SpI(" \u{1f9ee} Total: \u20b9",null==i.priceDetails?null:i.priceDetails.totalAmountToPay," "),e.R7$(9),e.Y8G("ngForOf",i.orderTimeline))},dependencies:[u.YU,u.Sq,u.bT,l.QW,l.W9,l.eU,l.BC,l.ai,l.el,u.PV],styles:[".container[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;flex-direction:row;justify-content:center;align-items:center;margin:0;padding:10px}.order[_ngcontent-%COMP%]{height:100%;width:50%}.details[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:row}"]}),a})()}];let j=(()=>{var r;class a{}return(r=a).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[c.iI.forChild(I),c.iI]}),a})(),w=(()=>{var r;class a{}return(r=a).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[u.MD,f.YN,l.bv,j]}),a})()}}]);