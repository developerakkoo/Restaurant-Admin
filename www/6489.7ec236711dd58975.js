"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6489],{6489:(w,p,s)=>{s.r(p),s.d(p,{ViewPageModule:()=>v});var m=s(177),g=s(4341),i=s(4488),h=s(8986),r=s(467),e=s(4438),f=s(4796),D=s(6722);const F=[{path:"",component:(()=>{var a;class u{constructor(n,t,l,o,c,P){this.auth=n,this.route=t,this.loadingController=l,this.http=o,this.router=c,this.toastController=P,this.startDate="",this.endDate="",this.page=1,this.partnerDetails={},this.hotelDetails={},this.compensationTable=[],this.partnerSettlements=[],this.partnerSettlementsAnalytics=[],this.paidStatus=1,this.selectedItems=new Set,this.totalPartnerPrice=0,this.partnerId=this.route.snapshot.paramMap.get("id")}ngOnInit(){}ionViewDidEnter(){this.getPartnerDetails()}setDateEvent(n,t){console.log(n.detail.value),console.log(t);let l=n.detail.value;"s"===t?(console.log("Set Start Date"),this.startDate=l):"e"===t&&(console.log("Set End Date"),this.endDate=l),console.log(this.startDate),console.log(this.endDate),this.getTable()}getPartnerDetails(){var n=this;return(0,r.A)(function*(){const t=yield n.loadingController.create({message:"Loading...",duration:3e3});var l;yield t.present(),n.auth.getPartnerById(n.partnerId).subscribe({next:(l=(0,r.A)(function*(o){console.log(o),n.partnerDetails=o.data,o&&o.data&&o.data.length>0?(n.partnerDetails=o.data[0],yield n.getHotelByPartner()):n.showToast("Partner details not found","warning")}),function(c){return l.apply(this,arguments)}),error:function(){var l=(0,r.A)(function*(o){console.log(o),yield t.dismiss(),n.showToast("Failed to load partner details","danger")});return function(c){return l.apply(this,arguments)}}()})})()}getHotelByPartner(){var t,n=this;this.auth.getAllHotelsPartner(this.partnerId).subscribe({next:(t=(0,r.A)(function*(l){console.log(l),l&&l.data&&l.data.length>0?(n.hotelDetails=l.data[0],n.hotelId=l.data[0]._id):n.showToast("Hotel details not found","warning")}),function(o){return t.apply(this,arguments)}),error:function(){var t=(0,r.A)(function*(l){console.log(l),n.showToast("Failed to load hotel details","danger")});return function(o){return t.apply(this,arguments)}}()})}viewSettlements(){this.router.navigate(["folder","partners","settle",this.hotelId])}getTable(){var t,n=this;this.auth.getPartnerCompensationTable(this.hotelId,this.startDate,this.endDate,this.page,this.paidStatus).subscribe({next:(t=(0,r.A)(function*(l){console.log(l),n.compensationTable=l.data.content}),function(o){return t.apply(this,arguments)}),error:function(){var t=(0,r.A)(function*(l){console.log(l)});return function(o){return t.apply(this,arguments)}}()})}onCheckboxChange(n,t){n?this.selectedItems.add(t):this.selectedItems.delete(t),console.log(this.selectedItems),this.calculateTotalPartnerPrice()}calculateTotalPartnerPrice(){this.totalPartnerPrice=0,this.compensationTable.forEach(n=>{this.selectedItems.has(n._id)&&n.productDetails.forEach(t=>{this.totalPartnerPrice+=t.partnerPrice})})}showToast(n,t){var l=this;return(0,r.A)(function*(){yield(yield l.toastController.create({message:n,duration:2e3,color:t,position:"top"})).present()})()}}return(a=u).\u0275fac=function(n){return new(n||a)(e.rXU(f.u),e.rXU(h.nX),e.rXU(i.Xi),e.rXU(D.k),e.rXU(h.Ix),e.rXU(i.K_))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-view"]],decls:71,vars:19,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],["defaultHref","/folder/auth/partners"],["slot","end"],["color","primary","fill","clear",3,"click"],["slot","icon-only","name","create-outline"],[1,"ion-padding",3,"fullscreen"],[1,"row","g-4"],[1,"col-md-6"],[1,"card","shadow-sm","h-100","border-0"],[1,"card-header","bg-white","border-0","d-flex","justify-content-between","align-items-center"],[1,"mb-0","text-primary"],["name","person-outline",1,"me-2"],[1,"ms-2",3,"color"],[1,"card-body"],[1,"mb-4"],[1,"form-label","text-muted","small"],[1,"form-control-plaintext","fw-bold","fs-5"],[1,"form-control-plaintext","fw-bold"],["name","business-outline",1,"me-2"],[1,"d-flex","align-items-center"],[1,"me-2",3,"color"],["name","location-outline",1,"me-1"]],template:function(n,t){1&n&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Partner Details"),e.k0s(),e.j41(6,"ion-buttons",3)(7,"ion-button",4),e.bIt("click",function(){return t.viewSettlements()}),e.j41(8,"ion-label"),e.EFF(9,"View Settlements"),e.k0s(),e.nrm(10,"ion-icon",5),e.k0s()()()(),e.j41(11,"ion-content",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"div",10)(16,"h5",11),e.nrm(17,"ion-icon",12),e.EFF(18," Partner Information "),e.k0s(),e.j41(19,"ion-badge",13),e.EFF(20),e.k0s()(),e.j41(21,"div",14)(22,"div",15)(23,"label",16),e.EFF(24,"Name"),e.k0s(),e.j41(25,"p",17),e.EFF(26),e.k0s()(),e.j41(27,"div",15)(28,"label",16),e.EFF(29,"Email"),e.k0s(),e.j41(30,"p",18),e.EFF(31),e.k0s()(),e.j41(32,"div",15)(33,"label",16),e.EFF(34,"Phone Number"),e.k0s(),e.j41(35,"p",18),e.EFF(36),e.k0s()(),e.j41(37,"div",15)(38,"label",16),e.EFF(39,"Joined Date"),e.k0s(),e.j41(40,"p",18),e.EFF(41),e.nI1(42,"date"),e.k0s()()()()(),e.j41(43,"div",8)(44,"div",9)(45,"div",10)(46,"h5",11),e.nrm(47,"ion-icon",19),e.EFF(48," Hotel Information "),e.k0s(),e.j41(49,"div",20)(50,"ion-badge",21),e.EFF(51),e.k0s(),e.j41(52,"ion-badge",21),e.EFF(53),e.k0s()()(),e.j41(54,"div",14)(55,"div",15)(56,"label",16),e.EFF(57,"Hotel Name"),e.k0s(),e.j41(58,"p",17),e.EFF(59),e.k0s()(),e.j41(60,"div",15)(61,"label",16),e.EFF(62,"Address"),e.k0s(),e.j41(63,"p",18),e.EFF(64),e.k0s()(),e.j41(65,"div",15)(66,"label",16),e.EFF(67,"Location"),e.k0s(),e.j41(68,"p",18),e.nrm(69,"ion-icon",22),e.EFF(70),e.k0s()()()()()()()),2&n&&(e.Y8G("translucent",!0),e.R7$(11),e.Y8G("fullscreen",!0),e.R7$(8),e.Y8G("color",1===(null==t.partnerDetails?null:t.partnerDetails.status)?"success":"warning"),e.R7$(),e.SpI(" ",1===(null==t.partnerDetails?null:t.partnerDetails.status)?"Active":"Inactive"," "),e.R7$(6),e.JRh((null==t.partnerDetails?null:t.partnerDetails.name)||"N/A"),e.R7$(5),e.JRh((null==t.partnerDetails?null:t.partnerDetails.email)||"N/A"),e.R7$(5),e.JRh((null==t.partnerDetails?null:t.partnerDetails.phoneNumber)||"N/A"),e.R7$(5),e.JRh(e.i5U(42,16,null==t.partnerDetails?null:t.partnerDetails.createdAt,"medium")),e.R7$(9),e.Y8G("color",null!=t.hotelDetails&&t.hotelDetails.isOnline?"success":"warning"),e.R7$(),e.SpI(" ",null!=t.hotelDetails&&t.hotelDetails.isOnline?"Online":"Offline"," "),e.R7$(),e.Y8G("color",null!=t.hotelDetails&&t.hotelDetails.isTop?"primary":"secondary"),e.R7$(),e.SpI(" ",null!=t.hotelDetails&&t.hotelDetails.isTop?"Top Rated":"Regular"," "),e.R7$(6),e.JRh((null==t.hotelDetails?null:t.hotelDetails.hotelName)||"N/A"),e.R7$(5),e.JRh((null==t.hotelDetails?null:t.hotelDetails.address)||"N/A"),e.R7$(6),e.Lme(" Lat: ",(null==t.hotelDetails||null==t.hotelDetails.location?null:t.hotelDetails.location.coordinates[1])||"N/A",", Lng: ",(null==t.hotelDetails||null==t.hotelDetails.location?null:t.hotelDetails.location.coordinates[0])||"N/A"," "))},dependencies:[i.In,i.Jm,i.QW,i.W9,i.eU,i.iq,i.he,i.BC,i.ai,i.el,m.vh]}),u})()}];let b=(()=>{var a;class u{}return(a=u).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[h.iI.forChild(F),h.iI]}),u})(),v=(()=>{var a;class u{}return(a=u).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[m.MD,g.YN,i.bv,b]}),u})()}}]);