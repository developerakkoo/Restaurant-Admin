"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5249],{5249:(E,_,c)=>{c.r(_),c.d(_,{DashPageModule:()=>O});var h=c(177),u=c(4341),o=c(4488),g=c(8986),D=c(467),m=c(887),e=c(4438),p=c(4796);function f(i,d){1&i&&(e.j41(0,"span"),e.EFF(1,"\u{1f4b8} UPI"),e.k0s())}function C(i,d){1&i&&(e.j41(0,"span"),e.EFF(1,"\u{1f4b0} COD"),e.k0s())}function F(i,d){1&i&&(e.j41(0,"span"),e.EFF(1,"\u{1f3e6} Cash"),e.k0s())}function v(i,d){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const s=e.XpG().$implicit;e.R7$(),e.SpI("\u{1f4b3} ",s.paymentMode,"")}}function b(i,d){if(1&i&&(e.j41(0,"ion-item",34)(1,"ion-label")(2,"p"),e.EFF(3," \u{1f9fe} Order "),e.j41(4,"strong"),e.EFF(5),e.k0s(),e.EFF(6," from "),e.j41(7,"strong"),e.EFF(8),e.k0s(),e.EFF(9," to "),e.j41(10,"strong"),e.EFF(11),e.k0s()(),e.j41(12,"p"),e.EFF(13),e.k0s(),e.j41(14,"p"),e.EFF(15),e.j41(16,"span"),e.qex(17,35),e.DNE(18,f,2,0,"span",36)(19,C,2,0,"span",36)(20,F,2,0,"span",36)(21,v,2,1,"span",37),e.bVm(),e.k0s()()(),e.j41(22,"ion-note",2),e.EFF(23),e.nI1(24,"date"),e.k0s()()),2&i){const s=d.$implicit;e.R7$(5),e.SpI("#",s.orderId,""),e.R7$(3),e.JRh(null==s.user?null:s.user.phoneNumber),e.R7$(3),e.JRh(null==s.hotel?null:s.hotel.hotelName),e.R7$(2),e.JRh(null==s.userAddress?null:s.userAddress.address),e.R7$(2),e.SpI(" Total: \u20b9",null==s.priceDetails?null:s.priceDetails.totalAmountToPay," "),e.R7$(2),e.Y8G("ngSwitch",s.paymentMode),e.R7$(),e.Y8G("ngSwitchCase","UPI"),e.R7$(),e.Y8G("ngSwitchCase","COD"),e.R7$(),e.Y8G("ngSwitchCase","CASH"),e.R7$(3),e.JRh(e.i5U(24,10,s.updatedAt,"MMM d, h:mm a"))}}const y=[{path:"",component:(()=>{var i;class d{constructor(a,t,n,r,l){this.auth=a,this.loadingController=t,this.modalController=n,this.router=r,this.menuController=l,this.selectedRevenueSort="dayOfMonth",this.selectedOrderSort="day",this.totalOrders=0,this.totalPartners=0,this.totalRevenue=0,this.totalOnlineUsers=0,this.recentActivities=[],this.startDate="",this.endDate="",this.subscriptions=[]}ngOnInit(){console.log("DashPage initialized"),this.menuController.enable(!0)}ionViewDidEnter(){var a=this;return(0,D.A)(function*(){const t=yield a.loadingController.create({message:"Loading data...",spinner:"crescent"});yield t.present();try{a.getDashboardData("month","",""),a.getRevenueChartData("dayOfMonth"),a.getOrderChartData(),a.getRecentOrders()}catch(n){console.error("Error loading data:",n)}finally{yield t.dismiss()}})()}ionViewWillLeave(){console.log("DashPage will leave"),this.chart&&this.chart.destroy(),this.chartOrder&&this.chartOrder.destroy(),this.subscriptions&&this.subscriptions.forEach(a=>{a.unsubscribe()})}createChartTotalRevenue(a=[],t=[]){this.chart&&this.chart.destroy(),this.chart=new m.Ay("MyRevenueChart",{type:"bar",data:{labels:a,datasets:[{label:"Revenue",data:t}]},options:{responsive:!0,maintainAspectRatio:!1}})}createOrderChart(a=[],t=[]){this.chartOrder&&this.chartOrder.destroy(),this.chartOrder=new m.Ay("MyChartOrder",{type:"bar",data:{labels:a,datasets:[{label:"Orders",data:t,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})}onFilterChange(a){this.getDashboardData(a.detail.value,"","")}onSortChange(a){this.getRevenueChartData(a.detail.value)}onOrderSortChange(a){this.getOrderChartData(a.detail.value)}getDashboardData(a,t="",n=""){let r=this.auth.getDashboardData(a,t,n).subscribe({next:l=>{console.log("Dashboard data:",l.data.totalDeliveredOrders),this.totalOrders=l.data.totalOrders,this.totalDeliveredOrders=l.data.totalDeliveredOrders,this.totalCanceledOrders=l.data.totalCanceledOrders,this.totalUsers=l.data.totalUsers,this.totalDeliveryBoys=l.data.totalDeliveryBoys,this.totalCanceledOrders=l.data.totalCanceledOrders,this.totalRevenue=l.data.totalRevenue,this.totalOnlineUsers=l.data.totalOnlineUsers,this.totalPartners=l.data.totalPartners,this.totalDeliveryBoys=l.data.totalDeliveryBoys,this.recentActivities=l.recentActivities||[]},error:l=>{console.error("Error fetching dashboard data:",l)}});this.subscriptions.push(r)}getRevenueChartData(a){let t=this.auth.getRevenueChartData(a).subscribe({next:n=>{console.log("Revenue chart data:",n),console.log("Revenue chart data:",n.data.data),console.log("Revenue chart data:",n.data.label),this.revenueChartData=n.data.data,this.revenueChartLables=n.data.label,this.createChartTotalRevenue(n.data.label,n.data.data)},error:n=>{console.error("Error fetching revenue chart data:",n)}});this.subscriptions.push(t)}getOrderChartData(a="day"){let t=this.auth.getOrderChartData(a).subscribe({next:n=>{console.log("Order chart data:",n),console.log("Order chart data:",n.data.data),console.log("Order chart data:",n.data.labels),this.orderChartData=n.data.data,this.orderChartLables=n.data.label,this.createOrderChart(n.data.labels,n.data.data)},error:n=>{console.error("Error fetching order chart data:",n)}});this.subscriptions.push(t)}getRecentOrders(){var a=this;let t=this.auth.getPopulatedOrder().subscribe({next:(n=(0,D.A)(function*(r){console.log(r),a.recentActivities=r.data,a.recentActivities=a.recentActivities.slice(0,3)}),function(l){return n.apply(this,arguments)}),error:function(){var n=(0,D.A)(function*(r){console.log(r.error)});return function(l){return n.apply(this,arguments)}}()});var n;this.subscriptions.push(t)}setDateEvent(a,t){console.log(a.detail.value),console.log(t);let n=a.detail.value;"s"===t?(console.log("Set Start Date"),this.startDate=n):"e"===t&&(console.log("Set End Date"),this.endDate=n),this.startDate&&this.endDate?(console.log(this.startDate),console.log(this.endDate),this.getDashboardData("",this.startDate,this.endDate),this.getRevenueChartData("dayOfMonth"),this.getOrderChartData()):console.log("Both start and end dates must be set before fetching data.")}viewNotifications(){console.log("View notifications clicked"),this.router.navigate(["folder","notifications"])}viewMessages(){console.log("View messages clicked"),this.router.navigate(["folder","messages"])}}return(i=d).\u0275fac=function(a){return new(a||i)(e.rXU(p.u),e.rXU(o.Xi),e.rXU(o.W3),e.rXU(g.Ix),e.rXU(o._t))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-dash"]],decls:106,vars:14,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],["slot","end"],["color","primary","fill","clear",3,"click"],["slot","icon-only","name","notifications-circle-outline"],["slot","icon-only","name","chatbox-ellipses-outline"],[1,"animate__animated","animate__fadeIn",3,"fullscreen"],["size","4"],["type","date","fill","outline","label","Start Date","labelPlacement","stacked","placeholder","",3,"ionChange"],["type","date","fill","outline","label","End Date","labelPlacement","stacked","placeholder","",3,"ionChange"],["size","4",1,"dropdown-container"],["fill","outline","value","month","placeholder","Sort",3,"ionChange"],["value","dayOfWeek"],["value","month"],["value","year"],["size","12"],[1,"animate__animated","animate__fadeInDown","animate__faster"],["size","3",1,"animate__animated","animate__fadeInUp","animate__delay-1s"],["size","3",1,"animate__animated","animate__fadeInUp","animate__delay-2s"],["size","3",1,"animate__animated","animate__fadeInUp","animate__delay-3s"],["size","3",1,"animate__animated","animate__fadeInUp","animate__delay-4s"],["size","6"],[1,"animate__animated","animate__slideInLeft","animate__faster"],[1,"chart-header"],["interface","popover","placeholder","Sort by","fill","outline",1,"sort-select",3,"ngModelChange","ionChange","ngModel"],["value","day"],[1,"chart-container-orders"],["id","MyChartOrder"],[1,"animate__animated","animate__slideInRight","animate__faster"],["value","dayOfMonth"],[1,"chart-container-revenue"],["id","MyRevenueChart"],[1,"animate__animated","animate__fadeInUp","animate__slower"],["class","animate__animated animate__fadeInUp",4,"ngFor","ngForOf"],[1,"animate__animated","animate__fadeInUp"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(a,t){1&a&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"\u{1f680} Dashboard - Your Admin Hub \u{1f31f}"),e.k0s(),e.j41(6,"ion-buttons",2)(7,"ion-button",3),e.bIt("click",function(){return t.viewNotifications()}),e.nrm(8,"ion-icon",4),e.k0s(),e.j41(9,"ion-button",3),e.bIt("click",function(){return t.viewMessages()}),e.nrm(10,"ion-icon",5),e.k0s()()()(),e.j41(11,"ion-content",6)(12,"ion-grid")(13,"ion-row")(14,"ion-col",7)(15,"ion-input",8),e.bIt("ionChange",function(r){return t.setDateEvent(r,"s")}),e.k0s()(),e.j41(16,"ion-col",7)(17,"ion-input",9),e.bIt("ionChange",function(r){return t.setDateEvent(r,"e")}),e.k0s()(),e.j41(18,"ion-col",10)(19,"ion-select",11),e.bIt("ionChange",function(r){return t.onFilterChange(r)}),e.j41(20,"ion-select-option",12),e.EFF(21,"Daily"),e.k0s(),e.j41(22,"ion-select-option",13),e.EFF(23,"Monthly"),e.k0s(),e.j41(24,"ion-select-option",14),e.EFF(25,"Yearly"),e.k0s()()()(),e.j41(26,"ion-row")(27,"ion-col",15)(28,"ion-card",16)(29,"ion-card-header")(30,"ion-card-title"),e.EFF(31,"\u{1f31f} Overview - Your Performance at a Glance \u{1f680}"),e.k0s()(),e.j41(32,"ion-card-content")(33,"ion-grid")(34,"ion-row")(35,"ion-col",17)(36,"ion-card")(37,"ion-card-header")(38,"ion-card-subtitle"),e.EFF(39,"\u{1f4e6} Total Orders"),e.k0s(),e.j41(40,"ion-card-title"),e.EFF(41),e.k0s()()()(),e.j41(42,"ion-col",18)(43,"ion-card")(44,"ion-card-header")(45,"ion-card-subtitle"),e.EFF(46,"\u{1f4b0} Total Revenue"),e.k0s(),e.j41(47,"ion-card-title"),e.EFF(48),e.nI1(49,"currency"),e.k0s()()()(),e.j41(50,"ion-col",19)(51,"ion-card")(52,"ion-card-header")(53,"ion-card-subtitle"),e.EFF(54,"\u{1f465} Active Users"),e.k0s(),e.j41(55,"ion-card-title"),e.EFF(56),e.k0s()()()(),e.j41(57,"ion-col",20)(58,"ion-card")(59,"ion-card-header")(60,"ion-card-subtitle"),e.EFF(61,"\u{1f91d} Partners"),e.k0s(),e.j41(62,"ion-card-title"),e.EFF(63),e.k0s()()()()()()()()()(),e.j41(64,"ion-row")(65,"ion-col",21)(66,"ion-card",22)(67,"ion-card-header",23)(68,"ion-card-title"),e.EFF(69,"\u{1f4ca} Order Statistics"),e.k0s(),e.j41(70,"ion-select",24),e.mxI("ngModelChange",function(r){return e.DH7(t.selectedOrderSort,r)||(t.selectedOrderSort=r),r}),e.bIt("ionChange",function(r){return t.onOrderSortChange(r)}),e.j41(71,"ion-select-option",25),e.EFF(72,"Daily"),e.k0s(),e.j41(73,"ion-select-option",13),e.EFF(74,"Monthly"),e.k0s(),e.j41(75,"ion-select-option",14),e.EFF(76,"Yearly"),e.k0s()()(),e.j41(77,"ion-card-content")(78,"div",26)(79,"canvas",27),e.EFF(80),e.k0s()()()()(),e.j41(81,"ion-col",21)(82,"ion-card",28)(83,"ion-card-header",23)(84,"ion-card-title"),e.EFF(85,"\u{1f4b0} Revenue Statistics"),e.k0s(),e.j41(86,"ion-select",24),e.mxI("ngModelChange",function(r){return e.DH7(t.selectedRevenueSort,r)||(t.selectedRevenueSort=r),r}),e.bIt("ionChange",function(r){return t.onSortChange(r)}),e.j41(87,"ion-select-option",29),e.EFF(88,"Daily"),e.k0s(),e.j41(89,"ion-select-option",13),e.EFF(90,"Monthly"),e.k0s(),e.j41(91,"ion-select-option",14),e.EFF(92,"Yearly"),e.k0s()()(),e.j41(93,"ion-card-content")(94,"div",30)(95,"canvas",31),e.EFF(96),e.k0s()()()()()(),e.j41(97,"ion-row")(98,"ion-col",15)(99,"ion-card",32)(100,"ion-card-header")(101,"ion-card-title"),e.EFF(102,"\u{1f525} Recent Activities - Stay Updated! \u{1f552}"),e.k0s()(),e.j41(103,"ion-card-content")(104,"ion-list"),e.DNE(105,b,25,13,"ion-item",33),e.k0s()()()()()()()),2&a&&(e.Y8G("translucent",!0),e.R7$(11),e.Y8G("fullscreen",!0),e.R7$(30),e.JRh(t.totalOrders),e.R7$(7),e.JRh(e.i5U(49,11,t.totalRevenue,"INR")),e.R7$(8),e.JRh(t.totalOnlineUsers),e.R7$(7),e.JRh(t.totalPartners),e.R7$(7),e.R50("ngModel",t.selectedOrderSort),e.R7$(10),e.JRh(t.chartOrder),e.R7$(6),e.R50("ngModel",t.selectedRevenueSort),e.R7$(10),e.JRh(t.chart),e.R7$(9),e.Y8G("ngForOf",t.recentActivities))},dependencies:[h.Sq,h.ux,h.e1,h.fG,u.BC,u.vS,o.Jm,o.QW,o.b_,o.I9,o.ME,o.HW,o.tN,o.hU,o.W9,o.lO,o.eU,o.iq,o.$w,o.uz,o.he,o.nf,o.MC,o.JI,o.ln,o.Nm,o.Ip,o.BC,o.ai,o.Je,o.Gw,h.oe,h.vh],styles:[".chart-container-orders[_ngcontent-%COMP%], .chart-container-revenue[_ngcontent-%COMP%]{height:400px;width:auto}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row}.chart-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.2rem}.chart-header[_ngcontent-%COMP%]   .sort-select[_ngcontent-%COMP%]{width:150px}"]}),d})()}];let R=(()=>{var i;class d{}return(i=d).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.iI.forChild(y),g.iI]}),d})(),O=(()=>{var i;class d{}return(i=d).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.MD,u.YN,o.bv,R]}),d})()}}]);