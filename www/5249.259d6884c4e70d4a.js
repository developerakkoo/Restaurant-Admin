"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5249],{5249:(E,p,d)=>{d.r(p),d.d(p,{DashPageModule:()=>_});var h=d(177),u=d(4341),r=d(4488),g=d(8986),D=d(467),C=d(887),e=d(4438),f=d(4796);function F(o,c){1&o&&(e.j41(0,"span"),e.EFF(1,"\u{1f4b8} UPI"),e.k0s())}function v(o,c){1&o&&(e.j41(0,"span"),e.EFF(1,"\u{1f4b0} COD"),e.k0s())}function b(o,c){1&o&&(e.j41(0,"span"),e.EFF(1,"\u{1f3e6} Cash"),e.k0s())}function m(o,c){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const s=e.XpG().$implicit;e.R7$(),e.SpI("\u{1f4b3} ",s.paymentMode,"")}}function y(o,c){if(1&o&&(e.j41(0,"ion-item")(1,"ion-label")(2,"p"),e.EFF(3," \u{1f9fe} Order "),e.j41(4,"strong"),e.EFF(5),e.k0s(),e.EFF(6," from "),e.j41(7,"strong"),e.EFF(8),e.k0s(),e.EFF(9," to "),e.j41(10,"strong"),e.EFF(11),e.k0s()(),e.j41(12,"p"),e.EFF(13),e.k0s(),e.j41(14,"p"),e.EFF(15),e.j41(16,"span"),e.qex(17,27),e.DNE(18,F,2,0,"span",28)(19,v,2,0,"span",28)(20,b,2,0,"span",28)(21,m,2,1,"span",29),e.bVm(),e.k0s()()(),e.j41(22,"ion-note",2),e.EFF(23),e.nI1(24,"date"),e.k0s()()),2&o){const s=c.$implicit;e.R7$(5),e.SpI("#",s.orderId,""),e.R7$(3),e.JRh(null==s.user?null:s.user.phoneNumber),e.R7$(3),e.JRh(null==s.hotel?null:s.hotel.hotelName),e.R7$(2),e.JRh(null==s.userAddress?null:s.userAddress.address),e.R7$(2),e.SpI(" Total: \u20b9",null==s.priceDetails?null:s.priceDetails.totalAmountToPay," "),e.R7$(2),e.Y8G("ngSwitch",s.paymentMode),e.R7$(),e.Y8G("ngSwitchCase","UPI"),e.R7$(),e.Y8G("ngSwitchCase","COD"),e.R7$(),e.Y8G("ngSwitchCase","CASH"),e.R7$(3),e.JRh(e.i5U(24,10,s.updatedAt,"MMM d, h:mm a"))}}const R=[{path:"",component:(()=>{var o;class c{constructor(a,t,n,i){this.auth=a,this.loadingController=t,this.modalController=n,this.router=i,this.selectedRevenueSort="dayOfMonth",this.selectedOrderSort="day",this.totalOrders=0,this.totalPartners=0,this.totalRevenue=0,this.totalOnlineUsers=0,this.recentActivities=[],this.startDate="",this.endDate="",this.subscriptions=[]}ngOnInit(){console.log("DashPage initialized")}ionViewDidEnter(){var a=this;return(0,D.A)(function*(){const t=yield a.loadingController.create({message:"Loading data...",spinner:"crescent"});yield t.present();try{a.getDashboardData("month","",""),a.getRevenueChartData("dayOfMonth"),a.getOrderChartData(),a.getRecentOrders()}catch(n){console.error("Error loading data:",n)}finally{yield t.dismiss()}})()}ionViewWillLeave(){console.log("DashPage will leave"),this.chart&&this.chart.destroy(),this.chartOrder&&this.chartOrder.destroy(),this.subscriptions&&this.subscriptions.forEach(a=>{a.unsubscribe()})}createChartTotalRevenue(a=[],t=[]){this.chart&&this.chart.destroy(),this.chart=new C.Ay("MyRevenueChart",{type:"bar",data:{labels:a,datasets:[{label:"Revenue",data:t}]},options:{responsive:!0,maintainAspectRatio:!1}})}createOrderChart(a=[],t=[]){this.chartOrder&&this.chartOrder.destroy(),this.chartOrder=new C.Ay("MyChartOrder",{type:"bar",data:{labels:a,datasets:[{label:"Orders",data:t,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1}})}onFilterChange(a){this.getDashboardData(a.detail.value,"","")}onSortChange(a){this.getRevenueChartData(a.detail.value)}onOrderSortChange(a){this.getOrderChartData(a.detail.value)}getDashboardData(a,t="",n=""){let i=this.auth.getDashboardData(a,t,n).subscribe({next:l=>{console.log("Dashboard data:",l.data.totalDeliveredOrders),this.totalOrders=l.data.totalOrders,this.totalDeliveredOrders=l.data.totalDeliveredOrders,this.totalCanceledOrders=l.data.totalCanceledOrders,this.totalUsers=l.data.totalUsers,this.totalDeliveryBoys=l.data.totalDeliveryBoys,this.totalCanceledOrders=l.data.totalCanceledOrders,this.totalRevenue=l.data.totalRevenue,this.totalOnlineUsers=l.data.totalOnlineUsers,this.totalPartners=l.data.totalPartners,this.totalDeliveryBoys=l.data.totalDeliveryBoys,this.recentActivities=l.recentActivities||[]},error:l=>{console.error("Error fetching dashboard data:",l)}});this.subscriptions.push(i)}getRevenueChartData(a){let t=this.auth.getRevenueChartData(a).subscribe({next:n=>{console.log("Revenue chart data:",n),console.log("Revenue chart data:",n.data.data),console.log("Revenue chart data:",n.data.label),this.revenueChartData=n.data.data,this.revenueChartLables=n.data.label,this.createChartTotalRevenue(n.data.label,n.data.data)},error:n=>{console.error("Error fetching revenue chart data:",n)}});this.subscriptions.push(t)}getOrderChartData(a="day"){let t=this.auth.getOrderChartData(a).subscribe({next:n=>{console.log("Order chart data:",n),console.log("Order chart data:",n.data.data),console.log("Order chart data:",n.data.labels),this.orderChartData=n.data.data,this.orderChartLables=n.data.label,this.createOrderChart(n.data.labels,n.data.data)},error:n=>{console.error("Error fetching order chart data:",n)}});this.subscriptions.push(t)}getRecentOrders(){var a=this;let t=this.auth.getPopulatedOrder().subscribe({next:(n=(0,D.A)(function*(i){console.log(i),a.recentActivities=i.data,a.recentActivities=a.recentActivities.slice(0,3)}),function(l){return n.apply(this,arguments)}),error:function(){var n=(0,D.A)(function*(i){console.log(i.error)});return function(l){return n.apply(this,arguments)}}()});var n;this.subscriptions.push(t)}setDateEvent(a,t){console.log(a.detail.value),console.log(t);let n=a.detail.value;"s"===t?(console.log("Set Start Date"),this.startDate=n):"e"===t&&(console.log("Set End Date"),this.endDate=n),this.startDate&&this.endDate?(console.log(this.startDate),console.log(this.endDate),this.getDashboardData("",this.startDate,this.endDate),this.getRevenueChartData("dayOfMonth"),this.getOrderChartData()):console.log("Both start and end dates must be set before fetching data.")}viewNotifications(){console.log("View notifications clicked"),this.router.navigate(["folder","notifications"])}viewMessages(){console.log("View messages clicked"),this.router.navigate(["folder","messages"])}}return(o=c).\u0275fac=function(a){return new(a||o)(e.rXU(f.u),e.rXU(r.Xi),e.rXU(r.W3),e.rXU(g.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-dash"]],decls:106,vars:14,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],["slot","end"],["color","primary","fill","clear",3,"click"],["slot","icon-only","name","notifications-circle-outline"],["slot","icon-only","name","chatbox-ellipses-outline"],[3,"fullscreen"],["size","4"],["type","date","fill","outline","label","Start Date","labelPlacement","stacked","placeholder","",3,"ionChange"],["type","date","fill","outline","label","End Date","labelPlacement","stacked","placeholder","",3,"ionChange"],["size","4",1,"dropdown-container"],["fill","outline","value","month","placeholder","Sort",3,"ionChange"],["value","dayOfWeek"],["value","month"],["value","year"],["size","12"],["size","3"],["size","6"],[1,"chart-header"],["interface","popover","placeholder","Sort by","fill","outline",1,"sort-select",3,"ngModelChange","ionChange","ngModel"],["value","day"],[1,"chart-container-orders"],["id","MyChartOrder"],["value","dayOfMonth"],[1,"chart-container-revenue"],["id","MyRevenueChart"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(a,t){1&a&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"\u{1f680} Dashboard - Your Admin Hub \u{1f31f}"),e.k0s(),e.j41(6,"ion-buttons",2)(7,"ion-button",3),e.bIt("click",function(){return t.viewNotifications()}),e.nrm(8,"ion-icon",4),e.k0s(),e.j41(9,"ion-button",3),e.bIt("click",function(){return t.viewMessages()}),e.nrm(10,"ion-icon",5),e.k0s()()()(),e.j41(11,"ion-content",6)(12,"ion-grid")(13,"ion-row")(14,"ion-col",7)(15,"ion-input",8),e.bIt("ionChange",function(i){return t.setDateEvent(i,"s")}),e.k0s()(),e.j41(16,"ion-col",7)(17,"ion-input",9),e.bIt("ionChange",function(i){return t.setDateEvent(i,"e")}),e.k0s()(),e.j41(18,"ion-col",10)(19,"ion-select",11),e.bIt("ionChange",function(i){return t.onFilterChange(i)}),e.j41(20,"ion-select-option",12),e.EFF(21,"Daily"),e.k0s(),e.j41(22,"ion-select-option",13),e.EFF(23,"Monthly"),e.k0s(),e.j41(24,"ion-select-option",14),e.EFF(25,"Yearly"),e.k0s()()()(),e.j41(26,"ion-row")(27,"ion-col",15)(28,"ion-card")(29,"ion-card-header")(30,"ion-card-title"),e.EFF(31,"\u{1f31f} Overview - Your Performance at a Glance \u{1f680}"),e.k0s()(),e.j41(32,"ion-card-content")(33,"ion-grid")(34,"ion-row")(35,"ion-col",16)(36,"ion-card")(37,"ion-card-header")(38,"ion-card-subtitle"),e.EFF(39,"\u{1f4e6} Total Orders"),e.k0s(),e.j41(40,"ion-card-title"),e.EFF(41),e.k0s()()()(),e.j41(42,"ion-col",16)(43,"ion-card")(44,"ion-card-header")(45,"ion-card-subtitle"),e.EFF(46,"\u{1f4b0} Total Revenue"),e.k0s(),e.j41(47,"ion-card-title"),e.EFF(48),e.nI1(49,"currency"),e.k0s()()()(),e.j41(50,"ion-col",16)(51,"ion-card")(52,"ion-card-header")(53,"ion-card-subtitle"),e.EFF(54,"\u{1f465} Active Users"),e.k0s(),e.j41(55,"ion-card-title"),e.EFF(56),e.k0s()()()(),e.j41(57,"ion-col",16)(58,"ion-card")(59,"ion-card-header")(60,"ion-card-subtitle"),e.EFF(61,"\u{1f91d} Partners"),e.k0s(),e.j41(62,"ion-card-title"),e.EFF(63),e.k0s()()()()()()()()()(),e.j41(64,"ion-row")(65,"ion-col",17)(66,"ion-card")(67,"ion-card-header",18)(68,"ion-card-title"),e.EFF(69,"\u{1f4ca} Order Statistics"),e.k0s(),e.j41(70,"ion-select",19),e.mxI("ngModelChange",function(i){return e.DH7(t.selectedOrderSort,i)||(t.selectedOrderSort=i),i}),e.bIt("ionChange",function(i){return t.onOrderSortChange(i)}),e.j41(71,"ion-select-option",20),e.EFF(72,"Daily"),e.k0s(),e.j41(73,"ion-select-option",13),e.EFF(74,"Monthly"),e.k0s(),e.j41(75,"ion-select-option",14),e.EFF(76,"Yearly"),e.k0s()()(),e.j41(77,"ion-card-content")(78,"div",21)(79,"canvas",22),e.EFF(80),e.k0s()()()()(),e.j41(81,"ion-col",17)(82,"ion-card")(83,"ion-card-header",18)(84,"ion-card-title"),e.EFF(85,"\u{1f4b0} Revenue Statistics"),e.k0s(),e.j41(86,"ion-select",19),e.mxI("ngModelChange",function(i){return e.DH7(t.selectedRevenueSort,i)||(t.selectedRevenueSort=i),i}),e.bIt("ionChange",function(i){return t.onSortChange(i)}),e.j41(87,"ion-select-option",23),e.EFF(88,"Daily"),e.k0s(),e.j41(89,"ion-select-option",13),e.EFF(90,"Monthly"),e.k0s(),e.j41(91,"ion-select-option",14),e.EFF(92,"Yearly"),e.k0s()()(),e.j41(93,"ion-card-content")(94,"div",24)(95,"canvas",25),e.EFF(96),e.k0s()()()()()(),e.j41(97,"ion-row")(98,"ion-col",15)(99,"ion-card")(100,"ion-card-header")(101,"ion-card-title"),e.EFF(102,"\u{1f525} Recent Activities - Stay Updated! \u{1f552}"),e.k0s()(),e.j41(103,"ion-card-content")(104,"ion-list"),e.DNE(105,y,25,13,"ion-item",26),e.k0s()()()()()()()),2&a&&(e.Y8G("translucent",!0),e.R7$(11),e.Y8G("fullscreen",!0),e.R7$(30),e.JRh(t.totalOrders),e.R7$(7),e.JRh(e.i5U(49,11,t.totalRevenue,"INR")),e.R7$(8),e.JRh(t.totalOnlineUsers),e.R7$(7),e.JRh(t.totalPartners),e.R7$(7),e.R50("ngModel",t.selectedOrderSort),e.R7$(10),e.JRh(t.chartOrder),e.R7$(6),e.R50("ngModel",t.selectedRevenueSort),e.R7$(10),e.JRh(t.chart),e.R7$(9),e.Y8G("ngForOf",t.recentActivities))},dependencies:[h.Sq,h.ux,h.e1,h.fG,u.BC,u.vS,r.Jm,r.QW,r.b_,r.I9,r.ME,r.HW,r.tN,r.hU,r.W9,r.lO,r.eU,r.iq,r.$w,r.uz,r.he,r.nf,r.MC,r.JI,r.ln,r.Nm,r.Ip,r.BC,r.ai,r.Je,r.Gw,h.oe,h.vh],styles:[".chart-container-orders[_ngcontent-%COMP%], .chart-container-revenue[_ngcontent-%COMP%]{height:400px;width:auto}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row}.chart-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.2rem}.chart-header[_ngcontent-%COMP%]   .sort-select[_ngcontent-%COMP%]{width:150px}"]}),c})()}];let O=(()=>{var o;class c{}return(o=c).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(R),g.iI]}),c})(),_=(()=>{var o;class c{}return(o=c).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.MD,u.YN,r.bv,O]}),c})()}}]);