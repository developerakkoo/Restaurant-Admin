"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1813],{1813:(D,_,d)=>{d.r(_),d.d(_,{DishPageModule:()=>y});var m=d(177),a=d(4341),s=d(4488),u=d(8986),h=d(467),b=d(5312),e=d(4438),x=d(4796),P=d(1626);const k=()=>[0,.25,.5,.75];function v(o,c){if(1&o&&(e.j41(0,"ion-select-option",55),e.EFF(1),e.k0s()),2&o){const r=c.$implicit;e.Y8G("value",r._id),e.R7$(),e.JRh(r.name)}}function C(o,c){1&o&&(e.j41(0,"div",56),e.nrm(1,"ion-icon",57),e.j41(2,"span"),e.EFF(3,"Upload Image"),e.k0s()())}function M(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",58),e.nrm(1,"img",59),e.j41(2,"ion-button",60),e.bIt("click",function(){e.eBV(r);const n=e.XpG().index,i=e.XpG();return e.Njj(i.removeImage(n))}),e.nrm(3,"ion-icon",61),e.k0s()()}if(2&o){let r;const t=e.XpG().$implicit;e.R7$(),e.Y8G("src",null==(r=t.get("image_url"))?null:r.value,e.B4B)}}function O(o,c){if(1&o){const r=e.RV6();e.j41(0,"tr",24)(1,"td",25)(2,"div",26),e.nrm(3,"ion-input",27),e.j41(4,"small",28),e.EFF(5,"Auto-filled"),e.k0s()()(),e.j41(6,"td",29)(7,"ion-select",30),e.DNE(8,v,2,2,"ion-select-option",31),e.k0s()(),e.j41(9,"td",29),e.nrm(10,"ion-input",32),e.k0s(),e.j41(11,"td",29)(12,"ion-select",33)(13,"ion-select-option",34),e.EFF(14,"Veg"),e.k0s(),e.j41(15,"ion-select-option",35),e.EFF(16,"Non-veg"),e.k0s()()(),e.j41(17,"td",29),e.nrm(18,"ion-input",36),e.k0s(),e.j41(19,"td",29),e.nrm(20,"ion-input",37),e.k0s(),e.j41(21,"td",29)(22,"ion-select",38)(23,"ion-select-option",39),e.EFF(24,"No Spicy"),e.k0s(),e.j41(25,"ion-select-option",40),e.EFF(26,"Medium Spicy"),e.k0s(),e.j41(27,"ion-select-option",41),e.EFF(28,"Extra Spicy"),e.k0s(),e.j41(29,"ion-select-option",42),e.EFF(30,"Very Spicy"),e.k0s()()(),e.j41(31,"td",29)(32,"ion-select",43)(33,"ion-select-option",40),e.EFF(34,"In Stock"),e.k0s(),e.j41(35,"ion-select-option",39),e.EFF(36,"Out of Stock"),e.k0s()()(),e.j41(37,"td",44)(38,"div",45)(39,"input",46),e.bIt("change",function(n){const i=e.eBV(r).index,l=e.XpG();return e.Njj(l.onFileChange(n,i))}),e.k0s(),e.DNE(40,C,4,0,"div",47)(41,M,4,1,"div",48),e.k0s()(),e.j41(42,"td",49)(43,"div",50)(44,"ion-button",51),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.addDish())}),e.nrm(45,"ion-icon",52),e.k0s(),e.j41(46,"ion-button",53),e.bIt("click",function(){const n=e.eBV(r).index,i=e.XpG();return e.Njj(i.removeDish(n))}),e.nrm(47,"ion-icon",54),e.k0s()()()()}if(2&o){let r,t;const n=c.$implicit,i=c.index,l=e.XpG();e.Y8G("formGroupName",i),e.R7$(3),e.Y8G("value",l.hotelId),e.R7$(5),e.Y8G("ngForOf",l.categories),e.R7$(32),e.Y8G("ngIf",!(null!=(r=n.get("image_url"))&&r.value)),e.R7$(),e.Y8G("ngIf",null==(t=n.get("image_url"))?null:t.value),e.R7$(5),e.Y8G("disabled",1===l.dishes.length)}}function F(o,c){if(1&o){const r=e.RV6();e.j41(0,"ion-header",62)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Upload a Hotel Image"),e.k0s(),e.j41(4,"ion-buttons",63)(5,"ion-button",64),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.setOpen(!1))}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",65)(8,"div",66)(9,"input",67,0),e.bIt("change",function(n){e.eBV(r);const i=e.XpG();return e.Njj(i.uploadImage(n))}),e.k0s(),e.j41(11,"ion-button",68),e.bIt("click",function(){e.eBV(r);const n=e.sdS(10);return e.Njj(n.click())}),e.EFF(12," Select and Upload "),e.k0s()()()}}const w=[{path:"",component:(()=>{var o;class c{constructor(t,n,i,l,p,g,f){this.auth=t,this.router=n,this.route=i,this.toastController=l,this.fb=p,this.loadingController=g,this.http=f,this.hotels=[],this.categories=[],this.isDishImageUploadModalOpen=!1,this.hotelId=this.route.snapshot.paramMap.get("id"),console.log(this.hotelId),this.loadCategory(),this.getAllHotels(),this.form=this.fb.group({dishes:this.fb.array([this.createDishFormGroup()])})}ngOnInit(){console.log("Dish Page")}ionViewDidEnter(){}createDishFormGroup(){return console.log(this.hotelId),this.fb.group({hotelId:[this.hotelId,[a.k0.required]],categoryId:["",[a.k0.required]],name:["",[a.k0.required]],dishType:["",[a.k0.required]],partnerPrice:["",[a.k0.required]],userPrice:["",[a.k0.required]],spicLevel:["",[a.k0.required]],stock:["",[a.k0.required]],image_url:["",[a.k0.required]],status:[2],timeToPrepare:[30]})}get dishes(){return this.form.get("dishes")}addDish(){this.dishes.push(this.createDishFormGroup())}removeDish(t){this.dishes.removeAt(t)}loadCategory(){var n,t=this;this.auth.getAllCategory().subscribe({next:(n=(0,h.A)(function*(i){console.log(i),t.categories=i.data.content}),function(l){return n.apply(this,arguments)}),error:function(){var n=(0,h.A)(function*(i){console.log(i.error)});return function(l){return n.apply(this,arguments)}}()})}presentToast(t,n,i,l){var p=this;return(0,h.A)(function*(){(yield p.toastController.create({message:t,duration:n,color:i,position:l})).present()})()}uploadImage(t){var n=this;let i=t.target.files[0];console.log(i);let l=new FormData;var p;l.append("document",i,i.name),l.append("dishId",this.dishId),this.auth.uploadDishImage(l).subscribe({next:(p=(0,h.A)(function*(g){console.log(g),n.setOpen(!1)}),function(f){return p.apply(this,arguments)}),error:function(){var p=(0,h.A)(function*(g){console.log(g),n.presentToast("Image Upload Failed",2e3,"danger","bottom")});return function(f){return p.apply(this,arguments)}}()})}setOpen(t){this.isDishImageUploadModalOpen=t}onSubmit(){var t=this;return(0,h.A)(function*(){t.form.invalid&&(console.log(t.form.value),console.log("Foerm Invalid")),t.form.valid&&(console.log(t.form.value),t.auth.addProduct(t.form.value).subscribe({next:n=>{console.log(n),t.presentToast("Dish Addedd Successfully",2e3,"success","bottom"),setTimeout(()=>{t.router.navigate(["folder","partners"])},2e3)},error:n=>{console.log(n.error)}}))})()}getAllHotels(){return(0,h.A)(function*(){})()}viewNotifications(){}onFileChange(t,n){const i=t.target.files[0];if(i){const l=new FormData;l.append("image",i),this.http.post(b.c.URL+"admin/upload/image",l).subscribe(p=>{this.form.get("dishes").at(n).patchValue({image_url:p.data})},p=>{console.error("Error uploading file:",p)})}}removeImage(t){this.form.get("dishes").at(t).patchValue({image_url:""})}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(x.u),e.rXU(u.Ix),e.rXU(u.nX),e.rXU(s.K_),e.rXU(a.ok),e.rXU(s.Xi),e.rXU(P.Qq))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-dish"]],decls:56,vars:11,consts:[["f",""],[3,"translucent"],["color","primary","slot","end","fill","clear",3,"click"],["slot","icon-only","name","notifications-circle-outline"],["slot","icon-only","name","chatbox-ellipses-outline"],[1,"sheet-container",3,"fullscreen"],[1,"sheet-header"],[1,"sheet-content"],[3,"formGroup"],["formArrayName","dishes",1,"table-container"],[1,"table-wrapper"],[1,"sheet-table"],[1,"header-row"],[1,"header-cell"],["class","data-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"sheet-footer"],[1,"footer-info"],[1,"row-count"],[1,"footer-actions"],["type","button","fill","outline","color","medium",1,"footer-btn",3,"click"],["name","add","slot","start"],["type","submit","fill","solid","color","primary",1,"footer-btn",3,"click","disabled"],["name","checkmark","slot","start"],[3,"isOpen","initialBreakpoint","breakpoints"],[1,"data-row",3,"formGroupName"],[1,"data-cell","hotel-id-cell"],[1,"cell-content"],["type","text","readonly","true","formControlName","hotelId",1,"readonly-input",3,"value"],[1,"cell-hint"],[1,"data-cell"],["formControlName","categoryId","interface","action-sheet","placeholder","Select Category","multiple","false",1,"sheet-select"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Enter menu name","formControlName","name",1,"sheet-input"],["formControlName","dishType","value","veg","multiple","false","placeholder","Select Type",1,"sheet-select"],["value","veg"],["value","non-veg"],["type","number","placeholder","0.00","formControlName","partnerPrice",1,"sheet-input"],["type","number","placeholder","0.00","formControlName","userPrice",1,"sheet-input"],["value","0","multiple","false","placeholder","Spice Level","formControlName","spicLevel",1,"sheet-select"],["value","0"],["value","1"],["value","2"],["value","3"],["value","1","multiple","false","placeholder","Stock","formControlName","stock",1,"sheet-select"],[1,"data-cell","image-cell"],[1,"image-upload-wrapper"],["type","file","accept","image/*",1,"file-input",3,"change"],["class","upload-area",4,"ngIf"],["class","image-preview",4,"ngIf"],[1,"data-cell","actions-cell"],[1,"action-buttons"],["type","button","fill","clear","size","small","color","primary",1,"action-btn",3,"click"],["name","add-circle-outline"],["fill","clear","size","small","color","danger",1,"action-btn",3,"click","disabled"],["name","trash-outline"],[3,"value"],[1,"upload-area"],["name","cloud-upload-outline"],[1,"image-preview"],["alt","Dish Preview",1,"preview-image",3,"src"],["fill","clear","size","small","color","danger",1,"remove-image-btn",3,"click"],["name","close-circle"],[1,"ion-no-border"],["slot","end"],[3,"click"],[1,"ion-padding"],[1,"image-upload-container"],["hidden","","type","file","name","","id","",3,"change"],["expand","block","fill","outline","shape","round",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Dish Management"),e.k0s(),e.j41(4,"ion-button",2),e.bIt("click",function(){return n.viewNotifications()}),e.nrm(5,"ion-icon",3),e.k0s(),e.j41(6,"ion-button",2),e.bIt("click",function(){return n.viewNotifications()}),e.nrm(7,"ion-icon",4),e.k0s()()(),e.j41(8,"ion-content",5)(9,"div",6)(10,"h2"),e.EFF(11,"Add Multiple Dishes"),e.k0s(),e.j41(12,"p"),e.EFF(13,"Add multiple dishes to your menu at once. Each row represents one dish."),e.k0s()(),e.j41(14,"div",7)(15,"form",8)(16,"div",9)(17,"div",10)(18,"table",11)(19,"thead")(20,"tr",12)(21,"th",13),e.EFF(22,"Hotel ID"),e.k0s(),e.j41(23,"th",13),e.EFF(24,"Category"),e.k0s(),e.j41(25,"th",13),e.EFF(26,"Menu Name"),e.k0s(),e.j41(27,"th",13),e.EFF(28,"Dish Type"),e.k0s(),e.j41(29,"th",13),e.EFF(30,"Partner Price"),e.k0s(),e.j41(31,"th",13),e.EFF(32,"User Price"),e.k0s(),e.j41(33,"th",13),e.EFF(34,"Spice Level"),e.k0s(),e.j41(35,"th",13),e.EFF(36,"Stock"),e.k0s(),e.j41(37,"th",13),e.EFF(38,"Image"),e.k0s(),e.j41(39,"th",13),e.EFF(40,"Actions"),e.k0s()()(),e.j41(41,"tbody"),e.DNE(42,O,48,6,"tr",14),e.k0s()()()(),e.j41(43,"div",15)(44,"div",16)(45,"span",17),e.EFF(46),e.k0s()(),e.j41(47,"div",18)(48,"ion-button",19),e.bIt("click",function(){return n.addDish()}),e.nrm(49,"ion-icon",20),e.EFF(50," Add Another Dish "),e.k0s(),e.j41(51,"ion-button",21),e.bIt("click",function(){return n.onSubmit()}),e.nrm(52,"ion-icon",22),e.EFF(53," Submit All Dishes "),e.k0s()()()()(),e.j41(54,"ion-modal",23),e.DNE(55,F,13,0,"ng-template"),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(8),e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("formGroup",n.form),e.R7$(27),e.Y8G("ngForOf",n.dishes.controls),e.R7$(4),e.Lme("",n.dishes.length," dish",1!==n.dishes.length?"es":""," ready to add"),e.R7$(5),e.Y8G("disabled",n.form.invalid),e.R7$(3),e.Y8G("isOpen",n.isDishImageUploadModalOpen)("initialBreakpoint",.75)("breakpoints",e.lJ4(10,k)))},dependencies:[m.Sq,m.bT,a.qT,a.BC,a.cb,a.j4,a.JD,a.$R,a.v8,s.Jm,s.QW,s.W9,s.eU,s.iq,s.$w,s.Nm,s.Ip,s.BC,s.ai,s.Sb,s.su,s.Je,s.Gw],styles:[".sheet-container[_ngcontent-%COMP%]{--background: #f8f9fa;padding:0}.sheet-header[_ngcontent-%COMP%]{background:#fff;padding:20px 24px;border-bottom:1px solid #e0e0e0;box-shadow:0 1px 3px #0000001a}.sheet-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:600;color:#1a73e8}.sheet-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#5f6368;font-size:14px}.sheet-content[_ngcontent-%COMP%]{padding:24px;max-width:100%;overflow-x:auto}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;max-width:100%}.sheet-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;font-size:14px;min-width:1200px}.header-row[_ngcontent-%COMP%]{background:#f8f9fa;border-bottom:2px solid #e0e0e0}.header-cell[_ngcontent-%COMP%]{padding:16px 12px;text-align:left;font-weight:600;color:#202124;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-right:1px solid #e0e0e0;white-space:nowrap;min-width:120px}.header-cell[_ngcontent-%COMP%]:last-child{border-right:none}.data-row[_ngcontent-%COMP%]{border-bottom:1px solid #f1f3f4;transition:background-color .2s ease}.data-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.data-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.data-cell[_ngcontent-%COMP%]{padding:12px;border-right:1px solid #f1f3f4;vertical-align:top;min-width:120px}.data-cell[_ngcontent-%COMP%]:last-child{border-right:none}.cell-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.cell-hint[_ngcontent-%COMP%]{font-size:11px;color:#5f6368;font-style:italic}.sheet-input[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--background: transparent;--border: 1px solid #dadce0;--border-radius: 4px;--color: #202124;font-size:14px;min-height:36px}.sheet-input[_ngcontent-%COMP%]:focus{--border-color: #1a73e8;--background: #f8f9fa}.readonly-input[_ngcontent-%COMP%]{--background: #f8f9fa;--color: #5f6368;--border: 1px solid #dadce0}.sheet-select[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;--background: transparent;--border: 1px solid #dadce0;--border-radius: 4px;--color: #202124;font-size:14px;min-height:36px}.sheet-select[_ngcontent-%COMP%]:focus{--border-color: #1a73e8;--background: #f8f9fa}.image-cell[_ngcontent-%COMP%]{min-width:150px}.image-upload-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.file-input[_ngcontent-%COMP%]{position:absolute;opacity:0;width:100%;height:100%;cursor:pointer;z-index:2}.upload-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px 8px;border:2px dashed #dadce0;border-radius:6px;background:#f8f9fa;min-height:80px;transition:all .2s ease;cursor:pointer}.upload-area[_ngcontent-%COMP%]:hover{border-color:#1a73e8;background:#e8f0fe}.upload-area[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#5f6368;margin-bottom:4px}.upload-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#5f6368;text-align:center}.image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;border-radius:6px;overflow:hidden;border:1px solid #dadce0}.preview-image[_ngcontent-%COMP%]{width:80px;height:60px;object-fit:cover;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;--padding-start: 4px;--padding-end: 4px;--padding-top: 4px;--padding-bottom: 4px;height:20px;width:20px;border-radius:50%;background:#ffffffe6}.remove-image-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.actions-cell[_ngcontent-%COMP%]{min-width:100px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.action-btn[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 8px;--padding-bottom: 8px;height:32px;width:32px;border-radius:4px}.action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.sheet-footer[_ngcontent-%COMP%]{background:#fff;padding:20px 24px;border-top:1px solid #e0e0e0;margin-top:24px;border-radius:8px;box-shadow:0 2px 8px #0000001a;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px}.footer-info[_ngcontent-%COMP%]   .row-count[_ngcontent-%COMP%]{font-size:14px;color:#5f6368;font-weight:500}.footer-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.footer-btn[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 12px;--padding-bottom: 12px;font-weight:500;border-radius:6px}.footer-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.hotel-id-cell[_ngcontent-%COMP%]{min-width:100px;background:#f8f9fa}@media (max-width: 768px){.sheet-content[_ngcontent-%COMP%]{padding:16px}.sheet-header[_ngcontent-%COMP%]{padding:16px 20px}.sheet-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.sheet-footer[_ngcontent-%COMP%]{padding:16px 20px;flex-direction:column;align-items:stretch;gap:12px}.sheet-footer[_ngcontent-%COMP%]   .footer-actions[_ngcontent-%COMP%]{justify-content:center}.sheet-table[_ngcontent-%COMP%]{min-width:800px}.header-cell[_ngcontent-%COMP%], .data-cell[_ngcontent-%COMP%]{min-width:100px;padding:8px 6px}.image-cell[_ngcontent-%COMP%]{min-width:120px}.actions-cell[_ngcontent-%COMP%]{min-width:80px}}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f3f4;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dadce0;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#bdc1c6}.sheet-input[_ngcontent-%COMP%]:focus, .sheet-select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #1a73e833}.sheet-table.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.data-row.valid[_ngcontent-%COMP%]{background-color:#f0f9ff}.data-row.invalid[_ngcontent-%COMP%]{background-color:#fef2f2}.data-cell.error[_ngcontent-%COMP%]   .sheet-input[_ngcontent-%COMP%], .data-cell.error[_ngcontent-%COMP%]   .sheet-select[_ngcontent-%COMP%]{--border-color: #dc2626;--background: #fef2f2}"]}),c})()},{path:"view/:id",loadChildren:()=>d.e(5857).then(d.bind(d,5857)).then(o=>o.ViewPageModule)}];let j=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.iI.forChild(w),u.iI]}),c})(),y=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[m.MD,a.YN,a.X1,s.bv,j]}),c})()}}]);