"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4907],{854:(E,v,i)=>{i.d(v,{Z:()=>A});var f=i(467),t=i(4341),e=i(4438),n=i(4488),P=i(4796);let A=(()=>{var g;class o{constructor(s,r,a,p,y){this.formBuilder=s,this.toastController=r,this.auth=a,this.modalController=p,this.loadingController=y,this.form=this.formBuilder.group({name:[,[t.k0.required]],code:[,[t.k0.required]],codeType:[,[t.k0.required]],discountAmount:[,[t.k0.required]],minOrderAmount:[,[t.k0.required]],description:[,[t.k0.required]],expiry:[,[t.k0.required]]})}ngOnInit(){}close(){this.modalController.dismiss()}presentToast(s,r,a,p){var y=this;return(0,f.A)(function*(){(yield y.toastController.create({message:s,duration:r,color:a,position:p})).present()})()}onSubmit(){var s=this;return(0,f.A)(function*(){var r;s.form.valid&&(console.log(s.form.value),s.auth.addPromo(s.form.value).subscribe({next:(r=(0,f.A)(function*(a){console.log(a),s.presentToast("Promo Code Added",2e3,"success","top"),s.modalController.dismiss()}),function(p){return r.apply(this,arguments)}),error:function(){var r=(0,f.A)(function*(a){console.log(a.error)});return function(p){return r.apply(this,arguments)}}()}))})()}}return(g=o).\u0275fac=function(s){return new(s||g)(e.rXU(t.ok),e.rXU(n.K_),e.rXU(P.u),e.rXU(n.W3),e.rXU(n.Xi))},g.\u0275cmp=e.VBU({type:g,selectors:[["app-add"]],decls:31,vars:4,consts:[[1,"ion-no-border",3,"translucent"],["fill","clear","slot","end","color","primary",3,"click"],["slot","icon-only","name","close"],[3,"fullscreen"],["fixed",""],["size","12"],[3,"formGroup"],["type","text","label","Name","labelPlacement","stacked","fill","outline","formControlName","name"],["type","text","label","Code","labelPlacement","stacked","fill","outline","formControlName","code"],["type","text","label","Discount Amount","labelPlacement","stacked","fill","outline","formControlName","discountAmount"],["type","text","label","Min Order Amount","labelPlacement","stacked","fill","outline","formControlName","minOrderAmount"],["type","text","label","Description","labelPlacement","stacked","fill","outline","formControlName","description"],["type","date","label","Expiry Date","labelPlacement","stacked","fill","outline","formControlName","expiry"],["value","1","formControlName","codeType","multiple","false","placeholder","Select Type"],["value","1"],["value","2"],["value","3"],["block","","color","primary","type","submit",3,"click","disabled"]],template:function(s,r){1&s&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Add new Promo Code"),e.k0s(),e.j41(4,"ion-button",1),e.bIt("click",function(){return r.close()}),e.nrm(5,"ion-icon",2),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-grid",4)(8,"ion-row")(9,"ion-col",5)(10,"form",6),e.nrm(11,"ion-input",7)(12,"ion-input",8)(13,"ion-input",9)(14,"ion-input",10)(15,"ion-input",11)(16,"br")(17,"ion-input",12)(18,"br"),e.j41(19,"ion-item")(20,"ion-label"),e.EFF(21,"Offer Type"),e.k0s(),e.j41(22,"ion-select",13)(23,"ion-select-option",14),e.EFF(24,"Free Delivery"),e.k0s(),e.j41(25,"ion-select-option",15),e.EFF(26,"Order Above Amount"),e.k0s(),e.j41(27,"ion-select-option",16),e.EFF(28,"New User"),e.k0s()()(),e.j41(29,"ion-button",17),e.bIt("click",function(){return r.onSubmit()}),e.EFF(30," Add Promo "),e.k0s()()()()()()),2&s&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(4),e.Y8G("formGroup",r.form),e.R7$(19),e.Y8G("disabled",r.form.invalid))},dependencies:[t.qT,t.BC,t.cb,t.j4,t.JD,n.Jm,n.hU,n.W9,n.lO,n.eU,n.iq,n.$w,n.uz,n.he,n.ln,n.Nm,n.Ip,n.BC,n.ai,n.Je,n.Gw]}),o})()},5562:(E,v,i)=>{i.d(v,{z:()=>g});var f=i(467),t=i(4438),e=i(4796),n=i(4488),P=i(177);function A(o,h){if(1&o){const s=t.RV6();t.j41(0,"ion-item",2),t.bIt("click",function(){const a=t.eBV(s).$implicit,p=t.XpG();return t.Njj(p.selectUser(a._id))}),t.EFF(1),t.k0s()}if(2&o){const s=h.$implicit;t.R7$(),t.Lme(" ",s.name," - ",s.phoneNumber," ")}}let g=(()=>{var o;class h{constructor(r,a){this.auth=r,this.modalController=a,this.users=[]}ngOnInit(){this.auth.getAllCustomers("",1,1e3,"","","","0").subscribe(r=>{var a;console.log(r),this.users=null==r||null===(a=r.data)||void 0===a?void 0:a.content})}dismiss(){this.modalController.dismiss()}selectUser(r){var a=this;return(0,f.A)(function*(){yield a.modalController.dismiss({userId:r})})()}}return(o=h).\u0275fac=function(r){return new(r||o)(t.rXU(e.u),t.rXU(n.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-notification"]],decls:10,vars:3,consts:[[3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"fullscreen"],[3,"click",4,"ngFor","ngForOf"]],template:function(r,a){1&r&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Select User"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return a.dismiss()}),t.nrm(6,"ion-icon",3),t.k0s()()()(),t.j41(7,"ion-content",4)(8,"ion-list"),t.DNE(9,A,2,2,"ion-item",5),t.k0s()()),2&r&&(t.Y8G("translucent",!0),t.R7$(7),t.Y8G("fullscreen",!0),t.R7$(2),t.Y8G("ngForOf",a.users))},dependencies:[P.Sq,n.Jm,n.QW,n.W9,n.eU,n.iq,n.uz,n.nf,n.BC,n.ai]}),h})()},4907:(E,v,i)=>{i.r(v),i.d(v,{PromoCodePageModule:()=>b});var f=i(177),t=i(4341),e=i(4488),n=i(8986),P=i(467),A=i(854),g=i(5562),o=i(4438),h=i(4796),s=i(6722);function r(l,_){if(1&l){const m=o.RV6();o.j41(0,"ion-col",4)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-subtitle"),o.EFF(4),o.k0s(),o.j41(5,"ion-card-title"),o.EFF(6),o.k0s()(),o.j41(7,"ion-card-content")(8,"ion-item",5)(9,"ion-label",6)(10,"h2"),o.EFF(11),o.nI1(12,"uppercase"),o.k0s()(),o.nrm(13,"ion-icon",7),o.k0s(),o.j41(14,"ion-button",1),o.bIt("click",function(){const d=o.eBV(m).$implicit,u=o.XpG();return o.Njj(u.openNotificationModal(d))}),o.EFF(15," Notify User "),o.k0s()()()()}if(2&l){const m=_.$implicit;o.R7$(4),o.SpI("Upto Rs ",m.minOrderAmount,""),o.R7$(2),o.SpI("",m.discountAmount,"% OFF"),o.R7$(5),o.JRh(o.bMT(12,3,m.code))}}const p=[{path:"",component:(()=>{var l;class _{constructor(c,d,u,C){this.modalController=c,this.auth=d,this.http=u,this.loadingController=C,this.codes=[]}ngOnInit(){console.log("codes")}ionViewDidEnter(){this.getAllCodes()}openAddPromoModal(){var c=this;return(0,P.A)(function*(){yield(yield c.modalController.create({component:A.Z,animated:!0,backdropDismiss:!1,keyboardClose:!0,componentProps:{value:123}})).present()})()}getAllCodes(){var c=this;return(0,P.A)(function*(){var d;c.auth.getAllPromos("","").subscribe({next:(d=(0,P.A)(function*(u){console.log(u),c.codes=u.data}),function(C){return d.apply(this,arguments)}),error:function(){var d=(0,P.A)(function*(u){console.log(u.error)});return function(C){return d.apply(this,arguments)}}()})})()}openNotificationModal(c){var d=this;return(0,P.A)(function*(){const u=yield d.modalController.create({component:g.z,animated:!0,backdropDismiss:!1,keyboardClose:!0});yield u.present();const{data:C}=yield u.onWillDismiss();if(C&&C.userId){let k={userId:C.userId,title:"Promo Notification",type:"promo",message:`Get ${c.discountAmount}% off on next order. Order Now!`};console.log(k),d.http.sendPromoNotification(k).subscribe(F=>{console.log(F),d.getAllCodes()})}})()}}return(l=_).\u0275fac=function(c){return new(c||l)(o.rXU(e.W3),o.rXU(h.u),o.rXU(s.k),o.rXU(e.Xi))},l.\u0275cmp=o.VBU({type:l,selectors:[["app-promo-code"]],decls:10,vars:3,consts:[[1,"ion-no-border",3,"translucent"],["slot","end","expand","block",3,"click"],[3,"fullscreen"],["size","4",4,"ngFor","ngForOf"],["size","4"],["lines","none","color","primary"],["color","dark"],["slot","end","name","copy-outline"]],template:function(c,d){1&c&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),o.EFF(3,"Promo Code"),o.k0s(),o.j41(4,"ion-button",1),o.bIt("click",function(){return d.openAddPromoModal()}),o.EFF(5," Add new Promo "),o.k0s()()(),o.j41(6,"ion-content",2)(7,"ion-grid")(8,"ion-row"),o.DNE(9,r,16,5,"ion-col",3),o.k0s()()()),2&c&&(o.Y8G("translucent",!0),o.R7$(6),o.Y8G("fullscreen",!0),o.R7$(3),o.Y8G("ngForOf",d.codes))},dependencies:[f.Sq,e.Jm,e.b_,e.I9,e.ME,e.HW,e.tN,e.hU,e.W9,e.lO,e.eU,e.iq,e.uz,e.he,e.ln,e.BC,e.ai,f.Pc]}),_})()},{path:"add",loadChildren:()=>i.e(6765).then(i.bind(i,6765)).then(l=>l.AddPageModule)},{path:"notification",loadChildren:()=>i.e(8408).then(i.bind(i,8408)).then(l=>l.NotificationPageModule)}];let y=(()=>{var l;class _{}return(l=_).\u0275fac=function(c){return new(c||l)},l.\u0275mod=o.$C({type:l}),l.\u0275inj=o.G2t({imports:[n.iI.forChild(p),n.iI]}),_})(),b=(()=>{var l;class _{}return(l=_).\u0275fac=function(c){return new(c||l)},l.\u0275mod=o.$C({type:l}),l.\u0275inj=o.G2t({imports:[f.MD,t.YN,e.bv,y]}),_})()}}]);