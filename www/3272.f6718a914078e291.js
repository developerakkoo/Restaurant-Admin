"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3272],{9346:(k,v,i)=>{i.d(v,{Z:()=>A});var p=i(467),y=i(4341),e=i(4438),d=i(4488),h=i(4796),P=i(177);function t(f,C){if(1&f){const m=e.RV6();e.j41(0,"form",6),e.bIt("ngSubmit",function(){e.eBV(m);const r=e.XpG();return e.Njj(r.add())}),e.nrm(1,"ion-input",7),e.j41(2,"ion-button",8),e.EFF(3," Add "),e.k0s()()}if(2&f){const m=e.XpG();e.Y8G("formGroup",m.fb),e.R7$(2),e.Y8G("disabled",m.fb.invalid)}}function b(f,C){if(1&f){const m=e.RV6();e.j41(0,"div",9)(1,"label",10),e.nrm(2,"ion-icon",11),e.j41(3,"span"),e.EFF(4,"Choose a file"),e.k0s()(),e.j41(5,"input",12),e.bIt("change",function(r){e.eBV(m);const n=e.XpG();return e.Njj(n.fileEvent(r))}),e.k0s()()}}let A=(()=>{var f;class C{constructor(l,r,n,s){this.modalController=l,this.auth=r,this.formBuilder=n,this.loadingController=s,this.isCategoryAdded=!1,this.fb=this.formBuilder.group({categoryName:[,[y.k0.required]]})}ngOnInit(){}close(){this.modalController.dismiss()}fileEvent(l){var r=this;return(0,p.A)(function*(){let n=yield r.loadingController.create({message:"Uploading..."});yield n.present(),console.log(l.target.files[0]),r.file=l.target.files[0];let s=new FormData;var c;s.append("document",r.file,r.file.name),s.append("categoryId",r.categoryId),r.auth.uploadCategoryImage(s).subscribe({next:(c=(0,p.A)(function*(o){console.log(o),yield n.dismiss(),r.modalController.dismiss()}),function(a){return c.apply(this,arguments)}),error:function(){var c=(0,p.A)(function*(o){console.log(o),r.modalController.dismiss(),yield n.dismiss()});return function(a){return c.apply(this,arguments)}}()})})()}add(){var l=this;return(0,p.A)(function*(){var r;l.auth.addCategory(l.fb.value).subscribe({next:(r=(0,p.A)(function*(n){console.log(n),l.categoryId=n.data._id,l.isCategoryAdded=!0}),function(s){return r.apply(this,arguments)}),error:function(){var r=(0,p.A)(function*(n){console.log(n),l.isCategoryAdded=!1});return function(s){return r.apply(this,arguments)}}()})})()}}return(f=C).\u0275fac=function(l){return new(l||f)(e.rXU(d.W3),e.rXU(h.u),e.rXU(y.ok),e.rXU(d.Xi))},f.\u0275cmp=e.VBU({type:f,selectors:[["app-add"]],decls:9,vars:4,consts:[[1,"ion-no-border",3,"translucent"],["slot","end","fill","clear",3,"click"],["slot","icon-only","name","close"],[1,"ion-padding",3,"fullscreen"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","file-picker-container",4,"ngIf"],[3,"ngSubmit","formGroup"],["required","","formControlName","categoryName","mode","md","fill","outline","label","Category Name","labelPlacement","stacked","type","text"],["block","","color","primary","type","submit",3,"disabled"],[1,"file-picker-container"],["for","file",1,"file-picker-label"],["name","cloud-upload-outline"],["type","file","id","file",1,"file-picker-input",3,"change"]],template:function(l,r){1&l&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Add Category"),e.k0s(),e.j41(4,"ion-button",1),e.bIt("click",function(){return r.close()}),e.nrm(5,"ion-icon",2),e.k0s()()(),e.j41(6,"ion-content",3),e.DNE(7,t,4,2,"form",4)(8,b,6,0,"div",5),e.k0s()),2&l&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",!r.isCategoryAdded),e.R7$(),e.Y8G("ngIf",r.isCategoryAdded))},dependencies:[P.bT,y.qT,y.BC,y.cb,y.YS,y.j4,y.JD,d.Jm,d.W9,d.eU,d.iq,d.$w,d.BC,d.ai,d.Gw],styles:[".file-picker-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin-top:20px}.file-picker-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#3880ff;color:#fff;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:16px;transition:background-color .3s ease}.file-picker-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px}.file-picker-label[_ngcontent-%COMP%]:hover{background-color:#3171e0}.file-picker-input[_ngcontent-%COMP%]{display:none}"]}),C})()},3272:(k,v,i)=>{i.r(v),i.d(v,{CategoryPageModule:()=>r});var p=i(177),y=i(4341),e=i(4488),d=i(8986),h=i(467),P=i(9346),t=i(4438),b=i(4796),A=i(8490);function f(n,s){if(1&n){const c=t.RV6();t.j41(0,"ion-item")(1,"ion-avatar",1),t.nrm(2,"img",11),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"uppercase"),t.k0s(),t.j41(6,"ion-button",12),t.bIt("click",function(){const a=t.eBV(c).$implicit,u=t.XpG();return t.Njj(u.delete(a._id))}),t.nrm(7,"ion-icon",13),t.k0s()()}if(2&n){const c=s.$implicit;t.R7$(2),t.Y8G("src",c.image_url,t.B4B),t.R7$(2),t.JRh(t.bMT(5,2,c.name))}}const m=[{path:"",component:(()=>{var n;class s{constructor(o,a,u,g){this.router=o,this.auth=a,this.modalController=u,this.dataService=g,this.query="",this.cats=[]}ngOnInit(){console.log("Initalzed category page")}ionViewDidEnter(){this.getAllCategory()}viewNotifications(){}add(){var o=this;return(0,h.A)(function*(){const a=yield o.modalController.create({component:P.Z,canDismiss:!0,backdropDismiss:!1,animated:!0,mode:"ios",componentProps:{value:123}});yield a.present();const u=yield a.onDidDismiss();console.log(u);const g=`categories_${o.query}`;yield o.dataService.remove(g),o.getAllCategory()})()}getAllCategory(){var o=this;return(0,h.A)(function*(){const a=`categories_${o.query}`,u=yield o.dataService.get(a);if(u)return console.log("Using cached data"),void(o.cats=JSON.parse(u));var g;o.auth.getAllCategories(o.query).subscribe({next:(g=(0,h.A)(function*(_){console.log(_),o.cats=_.data.content,yield o.dataService.set(a,JSON.stringify(o.cats))}),function(M){return g.apply(this,arguments)}),error:function(){var g=(0,h.A)(function*(_){console.log(_)});return function(M){return g.apply(this,arguments)}}()})})()}delete(o){var u,a=this;this.auth.deleteCategory(o).subscribe({next:(u=(0,h.A)(function*(g){console.log(g);const _=`categories_${a.query}`;yield a.dataService.remove(_),a.getAllCategory()}),function(_){return u.apply(this,arguments)}),error:function(){var u=(0,h.A)(function*(g){console.log(g)});return function(_){return u.apply(this,arguments)}}()})}}return(n=s).\u0275fac=function(o){return new(o||n)(t.rXU(d.Ix),t.rXU(b.u),t.rXU(e.W3),t.rXU(A.u))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-category"]],decls:22,vars:3,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],["color","primary","slot","end","fill","clear",3,"click"],["slot","icon-only","name","notifications-circle-outline"],["slot","icon-only","name","chatbox-ellipses-outline"],[3,"fullscreen"],["fixed",""],["size","6","offset","3"],[3,"click"],[4,"ngFor","ngForOf"],["size","6"],["crossorigin","anonymous",3,"src"],["fill","clear","color","danger","slot","end",3,"click"],["slot","icon-only","name","trash"]],template:function(o,a){1&o&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Categories"),t.k0s(),t.j41(6,"ion-button",2),t.bIt("click",function(){return a.viewNotifications()}),t.nrm(7,"ion-icon",3),t.k0s(),t.j41(8,"ion-button",2),t.bIt("click",function(){return a.viewNotifications()}),t.nrm(9,"ion-icon",4),t.k0s()()(),t.j41(10,"ion-content",5)(11,"ion-grid",6)(12,"ion-row")(13,"ion-col",7)(14,"ion-list")(15,"ion-list-header")(16,"ion-label"),t.EFF(17,"All Categories"),t.k0s(),t.j41(18,"ion-button",8),t.bIt("click",function(){return a.add()}),t.EFF(19,"Add new"),t.k0s()(),t.DNE(20,f,8,4,"ion-item",9),t.k0s()(),t.nrm(21,"ion-col",10),t.k0s()()()),2&o&&(t.Y8G("translucent",!0),t.R7$(10),t.Y8G("fullscreen",!0),t.R7$(10),t.Y8G("ngForOf",a.cats))},dependencies:[p.Sq,e.mC,e.Jm,e.QW,e.hU,e.W9,e.lO,e.eU,e.iq,e.uz,e.he,e.nf,e.AF,e.MC,e.ln,e.BC,e.ai,p.Pc]}),s})()},{path:"add",loadChildren:()=>i.e(2752).then(i.bind(i,2752)).then(n=>n.AddPageModule)}];let l=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[d.iI.forChild(m),d.iI]}),s})(),r=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[p.MD,y.YN,e.bv,l]}),s})()}}]);