"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5127],{5127:(w,p,d)=>{d.r(p),d.d(p,{OrdersPageModule:()=>R});var h=d(177),m=d(4341),a=d(4488),_=d(8986),c=d(467),e=d(4438),v=d(4796);function O(n,s){1&n&&(e.j41(0,"ion-text",18)(1,"h1"),e.EFF(2," No Orders Found! "),e.k0s()())}function y(n,s){if(1&n){const r=e.RV6();e.j41(0,"ion-badge",31),e.bIt("click",function(){e.eBV(r);const i=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.presentActionSheet(i._id))}),e.EFF(1,"Accept Order"),e.k0s()}}function b(n,s){if(1&n&&(e.j41(0,"ion-select-option",34),e.EFF(1),e.k0s()),2&n){const r=s.$implicit;e.Y8G("value",r._id),e.R7$(),e.Lme("",r.firstName," ",r.lastName,"")}}function F(n,s){if(1&n){const r=e.RV6();e.j41(0,"ion-select",32),e.bIt("ionChange",function(i){e.eBV(r);const o=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.assignDriverEvent(i,o._id))}),e.DNE(1,b,2,3,"ion-select-option",33),e.k0s()}if(2&n){const r=e.XpG(3);e.R7$(),e.Y8G("ngForOf",r.drivers)}}function x(n,s){1&n&&(e.j41(0,"ion-badge",35),e.EFF(1,"New"),e.k0s())}function j(n,s){1&n&&(e.j41(0,"ion-badge",36),e.EFF(1,"Delivered"),e.k0s())}function k(n,s){1&n&&(e.j41(0,"ion-badge",37),e.EFF(1,"Delivery Assigned"),e.k0s())}function A(n,s){1&n&&(e.j41(0,"ion-badge",38),e.EFF(1,"Rejected"),e.k0s())}function P(n,s){1&n&&(e.j41(0,"ion-badge",39),e.EFF(1,"On the way"),e.k0s())}function D(n,s){if(1&n){const r=e.RV6();e.j41(0,"tr")(1,"th"),e.EFF(2),e.k0s(),e.j41(3,"th"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"th"),e.EFF(7),e.k0s(),e.j41(8,"th"),e.EFF(9),e.k0s(),e.j41(10,"th"),e.EFF(11),e.nI1(12,"currency"),e.k0s(),e.j41(13,"th")(14,"ion-badge",23),e.bIt("click",function(){const i=e.eBV(r).$implicit,o=e.XpG(2);return e.Njj(o.openDetailsPage(i._id))}),e.EFF(15,"View"),e.k0s(),e.DNE(16,y,2,0,"ion-badge",24)(17,F,2,1,"ion-select",25),e.k0s(),e.j41(18,"th"),e.DNE(19,x,2,0,"ion-badge",26)(20,j,2,0,"ion-badge",27)(21,k,2,0,"ion-badge",28)(22,A,2,0,"ion-badge",29)(23,P,2,0,"ion-badge",30),e.k0s()()}if(2&n){const r=s.$implicit;e.R7$(2),e.JRh(r.orderId),e.R7$(2),e.JRh(e.i5U(5,12,r.createdAt,"fullDate")),e.R7$(3),e.JRh(null==r||null==r.user?null:r.user.name),e.R7$(2),e.JRh(null==r||null==r.userAddress?null:r.userAddress.address),e.R7$(2),e.JRh(e.i5U(12,15,null==r||null==r.priceDetails?null:r.priceDetails.totalAmountToPay,"INR")),e.R7$(5),e.Y8G("ngIf",4===(null==r?null:r.orderStatus)),e.R7$(),e.Y8G("ngIf",4===(null==r?null:r.orderStatus)),e.R7$(2),e.Y8G("ngIf",0===(null==r?null:r.orderStatus)),e.R7$(),e.Y8G("ngIf",3===(null==r?null:r.orderStatus)),e.R7$(),e.Y8G("ngIf",2===(null==r?null:r.orderStatus)),e.R7$(),e.Y8G("ngIf",5===(null==r?null:r.orderStatus)),e.R7$(),e.Y8G("ngIf",4===(null==r?null:r.orderStatus))}}function E(n,s){if(1&n&&(e.j41(0,"div",19)(1,"table",20)(2,"thead")(3,"tr")(4,"th",21),e.EFF(5,"#ID"),e.k0s(),e.j41(6,"th",21),e.EFF(7,"Date"),e.k0s(),e.j41(8,"th",21),e.EFF(9,"Customer name"),e.k0s(),e.j41(10,"th",21),e.EFF(11,"Address"),e.k0s(),e.j41(12,"th",21),e.EFF(13,"Amount"),e.k0s(),e.j41(14,"th",21),e.EFF(15,"Action"),e.k0s(),e.j41(16,"th",21),e.EFF(17,"Status"),e.k0s()()(),e.j41(18,"tbody"),e.DNE(19,D,24,18,"tr",22),e.k0s()()()),2&n){const r=e.XpG();e.R7$(19),e.Y8G("ngForOf",r.orders)}}const C=[{path:"",component:(()=>{var n;class s{constructor(t,i,o,l){this.auth=t,this.router=i,this.actionSheetController=o,this.loadingController=l,this.orders=[],this.drivers=[],this.query="",this.status=""}ngOnInit(){}onSearchChange(t){console.log(t.detail.value),this.query=t.detail.value,this.getAllOrders(),this.getAllDeliveryBoys()}ionViewDidEnter(){this.getAllOrders(),this.getAllDeliveryBoys()}filterEvent(t){console.log(t.detail.value),this.status=t.detail.value,this.getAllOrders(),this.getAllDeliveryBoys()}setDateEvent(t,i){console.log(t.detail.value),console.log(i);let o=t.detail.value;"s"===i?(console.log("Set Start Date"),this.startDate=o):"e"===i&&(console.log("Set End Date"),this.endDate=o),this.getAllOrders(),console.log(this.startDate),console.log(this.endDate)}getAllDeliveryBoys(){var t=this;return(0,c.A)(function*(){var i;t.auth.getAllDeliveryBoys(t.query,1,50,"","","").subscribe({next:(i=(0,c.A)(function*(o){console.log(o),t.drivers=o.data.content}),function(l){return i.apply(this,arguments)}),error:function(){var i=(0,c.A)(function*(o){console.log(o.error)});return function(l){return i.apply(this,arguments)}}()})})()}getAllOrders(){var t=this;return(0,c.A)(function*(){var i;t.auth.getAllOrders(t.query,1,50,t.status,"",t.startDate,t.endDate).subscribe({next:(i=(0,c.A)(function*(o){console.log(o),t.orders=o.data.content}),function(l){return i.apply(this,arguments)}),error:function(){var i=(0,c.A)(function*(o){console.log(o.error)});return function(l){return i.apply(this,arguments)}}()})})()}acceptOrder(t){var o,i=this;this.auth.AcceptRejectOrder(t,4).subscribe({next:(o=(0,c.A)(function*(l){console.log(l),i.getAllOrders()}),function(u){return o.apply(this,arguments)}),error:function(){var o=(0,c.A)(function*(l){console.log(l.error)});return function(u){return o.apply(this,arguments)}}()})}rejectOrder(t){var o,i=this;this.auth.AcceptRejectOrder(t,5).subscribe({next:(o=(0,c.A)(function*(l){console.log(l),i.getAllOrders()}),function(u){return o.apply(this,arguments)}),error:function(){var o=(0,c.A)(function*(l){console.log(l.error)});return function(u){return o.apply(this,arguments)}}()})}presentActionSheet(t){var i=this;return(0,c.A)(function*(){yield(yield i.actionSheetController.create({header:"Albums",buttons:[{text:"Accept",role:"",icon:"checkmark",handler:()=>{console.log("Delete clicked"),i.acceptOrder(t)}},{text:"Reject",icon:"trash",handler:()=>{console.log("Share clicked"),i.rejectOrder(t)}},{text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]})).present()})()}viewNotifications(){}assignDriverEvent(t,i){var o=this;console.log(t.detail.value),console.log(i);let l=t.detail.value;var u;console.log(l.length),1==l.length?this.auth.assignDeliveryBoy(i,t.detail.value).subscribe({next:(u=(0,c.A)(function*(g){console.log(g),o.getAllOrders(),o.getAllDeliveryBoys()}),function(f){return u.apply(this,arguments)}),error:function(){var u=(0,c.A)(function*(g){console.log(g.error)});return function(f){return u.apply(this,arguments)}}()}):this.auth.assignMultipleDeliveryBoy(i,t.detail.value).subscribe({next:function(){var u=(0,c.A)(function*(g){console.log(g),o.getAllOrders(),o.getAllDeliveryBoys()});return function(f){return u.apply(this,arguments)}}(),error:function(){var u=(0,c.A)(function*(g){console.log(g.error)});return function(f){return u.apply(this,arguments)}}()})}openDetailsPage(t){console.log(t),this.router.navigate(["folder","orders","view",t])}}return(n=s).\u0275fac=function(t){return new(t||n)(e.rXU(v.u),e.rXU(_.Ix),e.rXU(a.GD),e.rXU(a.Xi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-orders"]],decls:31,vars:5,consts:[[1,"ion-no-border",3,"translucent"],["color","primary","slot","end","fill","clear",3,"click"],["slot","icon-only","name","notifications-circle-outline"],["slot","icon-only","name","chatbox-ellipses-outline"],["mode","ios","placeholder","Search here","inputmode","decimal","type","decimal","showCancelButton","always",3,"ionChange","debounce"],[3,"fullscreen"],["color","primary","class","ion-text-center",4,"ngIf"],[1,"ion-padding"],["value","All","fill","outline","interface","popover","placeholder","Select Status",2,"width","200px","--height","40px",3,"ionChange"],["value",""],["value","0"],["value","5"],["value","2"],["value","4"],["value","3"],["type","date","label","Start Date","labelPlacement","stacked","fill","outline","placeholder","Awesome Input",2,"width","200px","--height","40px",3,"ionChange"],["type","date","label","End Date","labelPlacement","stacked","fill","outline","placeholder","Awesome Input",2,"width","200px","--height","40px",3,"ionChange"],["class","table-responsive",4,"ngIf"],["color","primary",1,"ion-text-center"],[1,"table-responsive"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["color","danger","mode","ios",1,"ion-padding",3,"click"],["class","ion-padding","color","success","mode","ios",3,"click",4,"ngIf"],["fill","outline","multiple","true","placeholder","Select Driver",3,"ionChange",4,"ngIf"],["class","ion-padding","color","primary","mode","ios",4,"ngIf"],["class","ion-padding","color","success","mode","ios",4,"ngIf"],["class","ion-padding","color","tertiary","mode","ios",4,"ngIf"],["class","ion-padding","color","danger","mode","ios",4,"ngIf"],["class","ion-padding","color","warning","mode","ios",4,"ngIf"],["color","success","mode","ios",1,"ion-padding",3,"click"],["fill","outline","multiple","true","placeholder","Select Driver",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","mode","ios",1,"ion-padding"],["color","success","mode","ios",1,"ion-padding"],["color","tertiary","mode","ios",1,"ion-padding"],["color","danger","mode","ios",1,"ion-padding"],["color","warning","mode","ios",1,"ion-padding"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Orders"),e.k0s(),e.j41(4,"ion-button",1),e.bIt("click",function(){return i.viewNotifications()}),e.nrm(5,"ion-icon",2),e.k0s(),e.j41(6,"ion-button",1),e.bIt("click",function(){return i.viewNotifications()}),e.nrm(7,"ion-icon",3),e.k0s()(),e.j41(8,"ion-searchbar",4),e.bIt("ionChange",function(l){return i.onSearchChange(l)}),e.k0s()(),e.j41(9,"ion-content",5),e.DNE(10,O,3,0,"ion-text",6),e.j41(11,"ion-list",7)(12,"ion-list-header")(13,"ion-label"),e.EFF(14,"Orders Below"),e.k0s(),e.j41(15,"ion-select",8),e.bIt("ionChange",function(l){return i.filterEvent(l)}),e.j41(16,"ion-select-option",9),e.EFF(17,"All"),e.k0s(),e.j41(18,"ion-select-option",10),e.EFF(19,"New Order"),e.k0s(),e.j41(20,"ion-select-option",11),e.EFF(21,"Rejected"),e.k0s(),e.j41(22,"ion-select-option",12),e.EFF(23,"Delivery Boy Assigned"),e.k0s(),e.j41(24,"ion-select-option",13),e.EFF(25,"On the Way"),e.k0s(),e.j41(26,"ion-select-option",14),e.EFF(27,"Delivered"),e.k0s()(),e.j41(28,"ion-input",15),e.bIt("ionChange",function(l){return i.setDateEvent(l,"s")}),e.k0s(),e.j41(29,"ion-input",16),e.bIt("ionChange",function(l){return i.setDateEvent(l,"e")}),e.k0s()()(),e.DNE(30,E,20,1,"div",17),e.k0s()),2&t&&(e.Y8G("translucent",!0),e.R7$(8),e.Y8G("debounce",250),e.R7$(),e.Y8G("fullscreen",!1),e.R7$(),e.Y8G("ngIf",0==i.orders.length),e.R7$(20),e.Y8G("ngIf",i.orders.length>0))},dependencies:[h.Sq,h.bT,a.In,a.Jm,a.W9,a.eU,a.iq,a.$w,a.he,a.nf,a.AF,a.S1,a.Nm,a.Ip,a.IO,a.BC,a.ai,a.Je,a.Gw,h.oe,h.vh],styles:[".top-container[_ngcontent-%COMP%]{width:100vw;height:auto;display:flex;flex-direction:row;justify-content:space-between;align-items:center;background-color:#00f}.title-div[_ngcontent-%COMP%]{width:20vw}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:10px;align-items:center;width:auto}ion-select[_ngcontent-%COMP%]{min-width:200px;--max-width: 400px}.badge[_ngcontent-%COMP%]{height:57px;width:149px;border-radius:8px;display:flex;justify-content:center;align-items:center}.badge[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{background-color:#f5dbe0;color:#ff5b5b}"]}),s})()},{path:"view/:id",loadChildren:()=>d.e(4347).then(d.bind(d,4347)).then(n=>n.ViewPageModule)}];let I=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[_.iI.forChild(C),_.iI]}),s})(),R=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[h.MD,m.YN,a.bv,I]}),s})()}}]);