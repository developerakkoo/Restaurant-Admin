"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4223],{9169:(I,v,d)=>{d.d(v,{N:()=>f,q:()=>u});var m=d(467),L=d(2709);class u{constructor(h){this.southwest=h.southwest,this.center=h.center,this.northeast=h.northeast}contains(h){var c=this;return(0,m.A)(function*(){return(yield L.P.mapBoundsContains({bounds:c,point:h})).contains})()}extend(h){var c=this;return(0,m.A)(function*(){const r=yield L.P.mapBoundsExtend({bounds:c,point:h});return c.southwest=r.bounds.southwest,c.center=r.bounds.center,c.northeast=r.bounds.northeast,c})()}}var f=function(i){return i.Normal="Normal",i.Hybrid="Hybrid",i.Satellite="Satellite",i.Terrain="Terrain",i.None="None",i}(f||{})},2709:(I,v,d)=>{d.d(v,{P:()=>L});const L=(0,d(7464).F3)("CapacitorGoogleMaps",{web:()=>d.e(1190).then(d.bind(d,1190)).then(u=>new u.CapacitorGoogleMapsWeb)});L.addListener("isMapInFocus",u=>{var f;const c=document.elementFromPoint(u.x,u.y),A=(null===(f=null==c?void 0:c.dataset)||void 0===f?void 0:f.internalId)===u.mapId;L.dispatchMapEvent({id:u.mapId,focus:A})})},4223:(I,v,d)=>{d.r(v),d.d(v,{MapPageModule:()=>R});var m=d(177),L=d(4341),u=d(4488),f=d(8986),i=d(467),h=d(9169),c=d(7464),r=d(2709);class A extends HTMLElement{constructor(){super()}connectedCallback(){if(this.innerHTML="","ios"==c.Ii.getPlatform()){this.style.overflow="scroll",this.style["-webkit-overflow-scrolling"]="touch";const e=document.createElement("div");e.style.height="200%",this.appendChild(e)}}}customElements.define("capacitor-google-map",A);class y{constructor(e){this.element=null,this.resizeObserver=null,this.handleScrollEvent=()=>this.updateMapBounds(),this.id=e}static create(e,n){return(0,i.A)(function*(){const t=new y(e.id);if(!e.element)throw new Error("container element is required");void 0===e.config.androidLiteMode&&(e.config.androidLiteMode=!1),t.element=e.element,t.element.dataset.internalId=e.id;const a=yield y.getElementBounds(e.element);if(e.config.width=a.width,e.config.height=a.height,e.config.x=a.x,e.config.y=a.y,e.config.devicePixelRatio=window.devicePixelRatio,"android"==c.Ii.getPlatform()&&t.initScrolling(),c.Ii.isNativePlatform()){e.element={};const s=()=>{var C,k;const w=null!==(k=null===(C=t.element)||void 0===C?void 0:C.getBoundingClientRect())&&void 0!==k?k:{};return{x:w.x,y:w.y,width:w.width,height:w.height}},g=()=>{r.P.onDisplay({id:t.id,mapBounds:s()})},p=()=>{r.P.onResize({id:t.id,mapBounds:s()})},P=t.element.closest(".ion-page");"ios"===c.Ii.getPlatform()&&P&&(P.addEventListener("ionViewWillEnter",()=>{setTimeout(()=>{g()},100)}),P.addEventListener("ionViewDidEnter",()=>{setTimeout(()=>{g()},100)}));const M={width:a.width,height:a.height,isHidden:!1};t.resizeObserver=new ResizeObserver(()=>{if(null!=t.element){const C=t.element.getBoundingClientRect(),k=0===C.width&&0===C.height;k||(M.isHidden?"ios"===c.Ii.getPlatform()&&!P&&g():(M.width!==C.width||M.height!==C.height)&&p()),M.width=C.width,M.height=C.height,M.isHidden=k}}),t.resizeObserver.observe(t.element)}if(yield new Promise((s,g)=>{setTimeout((0,i.A)(function*(){try{yield r.P.create(e),s(void 0)}catch(p){g(p)}}),200)}),n){const s=yield r.P.addListener("onMapReady",g=>{g.mapId==t.id&&(n(g),s.remove())})}return t})()}static getElementBounds(e){return(0,i.A)(function*(){return new Promise(n=>{let t=e.getBoundingClientRect();if(0==t.width){let a=0;const s=setInterval(function(){0==t.width&&a<30?(t=e.getBoundingClientRect(),a++):(30==a&&console.warn("Map size could not be determined"),clearInterval(s),n(t))},100)}else n(t)})})()}enableTouch(){var e=this;return(0,i.A)(function*(){return r.P.enableTouch({id:e.id})})()}disableTouch(){var e=this;return(0,i.A)(function*(){return r.P.disableTouch({id:e.id})})()}enableClustering(e){var n=this;return(0,i.A)(function*(){return r.P.enableClustering({id:n.id,minClusterSize:e})})()}disableClustering(){var e=this;return(0,i.A)(function*(){return r.P.disableClustering({id:e.id})})()}addMarker(e){var n=this;return(0,i.A)(function*(){return(yield r.P.addMarker({id:n.id,marker:e})).id})()}addMarkers(e){var n=this;return(0,i.A)(function*(){return(yield r.P.addMarkers({id:n.id,markers:e})).ids})()}removeMarker(e){var n=this;return(0,i.A)(function*(){return r.P.removeMarker({id:n.id,markerId:e})})()}removeMarkers(e){var n=this;return(0,i.A)(function*(){return r.P.removeMarkers({id:n.id,markerIds:e})})()}addPolygons(e){var n=this;return(0,i.A)(function*(){return(yield r.P.addPolygons({id:n.id,polygons:e})).ids})()}addPolylines(e){var n=this;return(0,i.A)(function*(){return(yield r.P.addPolylines({id:n.id,polylines:e})).ids})()}removePolygons(e){var n=this;return(0,i.A)(function*(){return r.P.removePolygons({id:n.id,polygonIds:e})})()}addCircles(e){var n=this;return(0,i.A)(function*(){return(yield r.P.addCircles({id:n.id,circles:e})).ids})()}removeCircles(e){var n=this;return(0,i.A)(function*(){return r.P.removeCircles({id:n.id,circleIds:e})})()}removePolylines(e){var n=this;return(0,i.A)(function*(){return r.P.removePolylines({id:n.id,polylineIds:e})})()}destroy(){var e=this;return(0,i.A)(function*(){var n;return"android"==c.Ii.getPlatform()&&e.disableScrolling(),c.Ii.isNativePlatform()&&(null===(n=e.resizeObserver)||void 0===n||n.disconnect()),e.removeAllMapListeners(),r.P.destroy({id:e.id})})()}setCamera(e){var n=this;return(0,i.A)(function*(){return r.P.setCamera({id:n.id,config:e})})()}getMapType(){var e=this;return(0,i.A)(function*(){const{type:n}=yield r.P.getMapType({id:e.id});return h.N[n]})()}setMapType(e){var n=this;return(0,i.A)(function*(){return r.P.setMapType({id:n.id,mapType:e})})()}enableIndoorMaps(e){var n=this;return(0,i.A)(function*(){return r.P.enableIndoorMaps({id:n.id,enabled:e})})()}enableTrafficLayer(e){var n=this;return(0,i.A)(function*(){return r.P.enableTrafficLayer({id:n.id,enabled:e})})()}enableAccessibilityElements(e){var n=this;return(0,i.A)(function*(){return r.P.enableAccessibilityElements({id:n.id,enabled:e})})()}enableCurrentLocation(e){var n=this;return(0,i.A)(function*(){return r.P.enableCurrentLocation({id:n.id,enabled:e})})()}setPadding(e){var n=this;return(0,i.A)(function*(){return r.P.setPadding({id:n.id,padding:e})})()}getMapBounds(){var e=this;return(0,i.A)(function*(){return new h.q(yield r.P.getMapBounds({id:e.id}))})()}fitBounds(e,n){var t=this;return(0,i.A)(function*(){return r.P.fitBounds({id:t.id,bounds:e,padding:n})})()}initScrolling(){const e=document.getElementsByTagName("ion-content");for(let n=0;n<e.length;n++)e[n].scrollEvents=!0;window.addEventListener("ionScroll",this.handleScrollEvent),window.addEventListener("scroll",this.handleScrollEvent),window.addEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.addEventListener("change",()=>{setTimeout(this.updateMapBounds,500)}):window.addEventListener("orientationchange",()=>{setTimeout(this.updateMapBounds,500)})}disableScrolling(){window.removeEventListener("ionScroll",this.handleScrollEvent),window.removeEventListener("scroll",this.handleScrollEvent),window.removeEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.removeEventListener("change",()=>{setTimeout(this.updateMapBounds,1e3)}):window.removeEventListener("orientationchange",()=>{setTimeout(this.updateMapBounds,1e3)})}updateMapBounds(){if(this.element){const e=this.element.getBoundingClientRect();r.P.onScroll({id:this.id,mapBounds:{x:e.x,y:e.y,width:e.width,height:e.height}})}}setOnCameraIdleListener(e){var n=this;return(0,i.A)(function*(){n.onCameraIdleListener&&n.onCameraIdleListener.remove(),n.onCameraIdleListener=e?yield r.P.addListener("onCameraIdle",n.generateCallback(e)):void 0})()}setOnBoundsChangedListener(e){var n=this;return(0,i.A)(function*(){n.onBoundsChangedListener&&n.onBoundsChangedListener.remove(),n.onBoundsChangedListener=e?yield r.P.addListener("onBoundsChanged",n.generateCallback(e)):void 0})()}setOnCameraMoveStartedListener(e){var n=this;return(0,i.A)(function*(){n.onCameraMoveStartedListener&&n.onCameraMoveStartedListener.remove(),n.onCameraMoveStartedListener=e?yield r.P.addListener("onCameraMoveStarted",n.generateCallback(e)):void 0})()}setOnClusterClickListener(e){var n=this;return(0,i.A)(function*(){n.onClusterClickListener&&n.onClusterClickListener.remove(),n.onClusterClickListener=e?yield r.P.addListener("onClusterClick",n.generateCallback(e)):void 0})()}setOnClusterInfoWindowClickListener(e){var n=this;return(0,i.A)(function*(){n.onClusterInfoWindowClickListener&&n.onClusterInfoWindowClickListener.remove(),n.onClusterInfoWindowClickListener=e?yield r.P.addListener("onClusterInfoWindowClick",n.generateCallback(e)):void 0})()}setOnInfoWindowClickListener(e){var n=this;return(0,i.A)(function*(){n.onInfoWindowClickListener&&n.onInfoWindowClickListener.remove(),n.onInfoWindowClickListener=e?yield r.P.addListener("onInfoWindowClick",n.generateCallback(e)):void 0})()}setOnMapClickListener(e){var n=this;return(0,i.A)(function*(){n.onMapClickListener&&n.onMapClickListener.remove(),n.onMapClickListener=e?yield r.P.addListener("onMapClick",n.generateCallback(e)):void 0})()}setOnPolygonClickListener(e){var n=this;return(0,i.A)(function*(){n.onPolygonClickListener&&n.onPolygonClickListener.remove(),n.onPolygonClickListener=e?yield r.P.addListener("onPolygonClick",n.generateCallback(e)):void 0})()}setOnCircleClickListener(e){var n=this;return(0,i.A)(function*(){n.onCircleClickListener&&n.onCircleClickListener.remove(),n.onCircleClickListener=e?yield r.P.addListener("onCircleClick",n.generateCallback(e)):void 0})()}setOnMarkerClickListener(e){var n=this;return(0,i.A)(function*(){n.onMarkerClickListener&&n.onMarkerClickListener.remove(),n.onMarkerClickListener=e?yield r.P.addListener("onMarkerClick",n.generateCallback(e)):void 0})()}setOnPolylineClickListener(e){var n=this;return(0,i.A)(function*(){n.onPolylineClickListener&&n.onPolylineClickListener.remove(),n.onPolylineClickListener=e?yield r.P.addListener("onPolylineClick",n.generateCallback(e)):void 0})()}setOnMarkerDragStartListener(e){var n=this;return(0,i.A)(function*(){n.onMarkerDragStartListener&&n.onMarkerDragStartListener.remove(),n.onMarkerDragStartListener=e?yield r.P.addListener("onMarkerDragStart",n.generateCallback(e)):void 0})()}setOnMarkerDragListener(e){var n=this;return(0,i.A)(function*(){n.onMarkerDragListener&&n.onMarkerDragListener.remove(),n.onMarkerDragListener=e?yield r.P.addListener("onMarkerDrag",n.generateCallback(e)):void 0})()}setOnMarkerDragEndListener(e){var n=this;return(0,i.A)(function*(){n.onMarkerDragEndListener&&n.onMarkerDragEndListener.remove(),n.onMarkerDragEndListener=e?yield r.P.addListener("onMarkerDragEnd",n.generateCallback(e)):void 0})()}setOnMyLocationButtonClickListener(e){var n=this;return(0,i.A)(function*(){n.onMyLocationButtonClickListener&&n.onMyLocationButtonClickListener.remove(),n.onMyLocationButtonClickListener=e?yield r.P.addListener("onMyLocationButtonClick",n.generateCallback(e)):void 0})()}setOnMyLocationClickListener(e){var n=this;return(0,i.A)(function*(){n.onMyLocationClickListener&&n.onMyLocationClickListener.remove(),n.onMyLocationClickListener=e?yield r.P.addListener("onMyLocationClick",n.generateCallback(e)):void 0})()}removeAllMapListeners(){var e=this;return(0,i.A)(function*(){e.onBoundsChangedListener&&(e.onBoundsChangedListener.remove(),e.onBoundsChangedListener=void 0),e.onCameraIdleListener&&(e.onCameraIdleListener.remove(),e.onCameraIdleListener=void 0),e.onCameraMoveStartedListener&&(e.onCameraMoveStartedListener.remove(),e.onCameraMoveStartedListener=void 0),e.onClusterClickListener&&(e.onClusterClickListener.remove(),e.onClusterClickListener=void 0),e.onClusterInfoWindowClickListener&&(e.onClusterInfoWindowClickListener.remove(),e.onClusterInfoWindowClickListener=void 0),e.onInfoWindowClickListener&&(e.onInfoWindowClickListener.remove(),e.onInfoWindowClickListener=void 0),e.onMapClickListener&&(e.onMapClickListener.remove(),e.onMapClickListener=void 0),e.onPolylineClickListener&&(e.onPolylineClickListener.remove(),e.onPolylineClickListener=void 0),e.onMarkerClickListener&&(e.onMarkerClickListener.remove(),e.onMarkerClickListener=void 0),e.onPolygonClickListener&&(e.onPolygonClickListener.remove(),e.onPolygonClickListener=void 0),e.onCircleClickListener&&(e.onCircleClickListener.remove(),e.onCircleClickListener=void 0),e.onMarkerDragStartListener&&(e.onMarkerDragStartListener.remove(),e.onMarkerDragStartListener=void 0),e.onMarkerDragListener&&(e.onMarkerDragListener.remove(),e.onMarkerDragListener=void 0),e.onMarkerDragEndListener&&(e.onMarkerDragEndListener.remove(),e.onMarkerDragEndListener=void 0),e.onMyLocationButtonClickListener&&(e.onMyLocationButtonClickListener.remove(),e.onMyLocationButtonClickListener=void 0),e.onMyLocationClickListener&&(e.onMyLocationClickListener.remove(),e.onMyLocationClickListener=void 0)})()}generateCallback(e){const n=this.id;return t=>{t.mapId==n&&e(t)}}}var E=d(5312),D=d(2002),B=d(7762),o=d(4438),b=d(1626);const S=["map"],O=[{path:"",component:(()=>{var l;class e{constructor(t,a,s,g,p){this.route=t,this.router=a,this.http=s,this.modalController=g,this.geolocation=p,this.newMap=null,this.reverseGeocodeAddressList=[],this.location={lat:this.lat,lng:this.lon},this.reverseGeocoding(this.lat,this.lon)}ngOnInit(){console.log("Map Page")}ionViewDidEnter(){this.partnerId=this.route.snapshot.paramMap.get("id"),console.log(this.partnerId),this.loadCurrentPosition()}ngOnDestroy(){this.newMap&&(this.newMap.destroy(),this.newMap=null)}loadCurrentPosition(){var t=this;return(0,i.A)(function*(){const a=yield B.L.getCurrentPosition({enableHighAccuracy:!0});console.log("Current position:",a),console.log(a),t.createMap(),t.coordinates=a,t.lat=a.coords.latitude,t.lon=a.coords.longitude})()}createMap(){var t=this;return(0,i.A)(function*(){t.newMap=yield y.create({id:"my-cool-map",element:document.getElementById("map"),apiKey:E.c.apiKey,language:"en",config:{draggableCursor:"true",draggable:!0,center:{lat:parseFloat(t.lat),lng:parseFloat(t.lon)},zoom:15}}),yield t.newMap.enableClustering(),yield t.newMap.setOnMarkerClickListener(s=>{console.log(s)}),yield t.newMap.setOnMarkerDragEndListener(s=>{console.log(s),t.lat=s.latitude,t.lon=s.longitude,t.reverseGeocoding(s.latitude,s.longitude)}),yield t.newMap.enableCurrentLocation(!0),yield t.newMap.addMarker({draggable:!0,title:"My Location",iconUrl:"assets/gps.png",iconSize:{width:50,height:50},iconAnchor:{x:25,y:50},isFlat:!0,coordinate:{lat:parseFloat(t.lat),lng:parseFloat(t.lon)}})})()}reverseGeocoding(t,a){this.http.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${a}&key=${E.c.apiKey}`).subscribe({next:s=>{console.log(s),this.reverseGeocodeAddressList=s.results,this.formattedAddress=s.results[0].formatted_address,this.location=s.results[0].geometry.location},error(s){console.log(s)}})}presentModal(){return(0,i.A)(function*(){})()}openAddAddressPage(){var t=this;return(0,i.A)(function*(){const a=yield t.modalController.create({component:D.P,componentProps:{value:t.formattedAddress,location:t.location}});yield a.present();const s=yield a.onDidDismiss();console.log(s)})()}setAddress(){console.log(this.partnerId),this.router.navigate(["folder","partners","hotels",this.lon,this.lat,this.partnerId])}}return(l=e).\u0275fac=function(t){return new(t||l)(o.rXU(f.nX),o.rXU(f.Ix),o.rXU(b.Qq),o.rXU(u.W3),o.rXU(B.L))},l.\u0275cmp=o.VBU({type:l,selectors:[["app-map"]],viewQuery:function(t,a){if(1&t&&o.GBs(S,5),2&t){let s;o.mGM(s=o.lsd())&&(a.partnerId=s.first)}},decls:12,vars:5,consts:[[3,"translucent"],["expand","block","slot","end",3,"click"],[3,"fullscreen"],["id","map"]],template:function(t,a){1&t&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),o.EFF(3,"Select Partners Business Location"),o.k0s(),o.j41(4,"ion-button",1),o.bIt("click",function(){return a.setAddress()}),o.EFF(5," Set Location "),o.k0s()()(),o.j41(6,"ion-content",2),o.nrm(7,"capacitor-google-map",3),o.j41(8,"div")(9,"p"),o.EFF(10),o.nI1(11,"uppercase"),o.k0s()()()),2&t&&(o.Y8G("translucent",!0),o.R7$(6),o.Y8G("fullscreen",!0),o.R7$(4),o.SpI("Address:- ",o.bMT(11,3,a.formattedAddress)," "))},dependencies:[u.Jm,u.W9,u.eU,u.BC,u.ai,m.Pc],styles:["capacitor-google-map[_ngcontent-%COMP%]{display:block;width:100%;height:90%}"]}),e})()}];let T=(()=>{var l;class e{}return(l=e).\u0275fac=function(t){return new(t||l)},l.\u0275mod=o.$C({type:l}),l.\u0275inj=o.G2t({imports:[f.iI.forChild(O),f.iI]}),e})(),R=(()=>{var l;class e{}return(l=e).\u0275fac=function(t){return new(t||l)},l.\u0275mod=o.$C({type:l}),l.\u0275inj=o.G2t({imports:[m.MD,L.YN,u.bv,T]}),e})()}}]);