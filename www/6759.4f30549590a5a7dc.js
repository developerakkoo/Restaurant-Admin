"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6759],{6759:(w,h,d)=>{d.r(h),d.d(h,{PincodePageModule:()=>O});var g=d(177),u=d(4341),s=d(4488),P=d(8986),p=d(467),f=d(8359),e=d(4438),_=d(4796),b=d(8490);function x(n,c){1&n&&(e.j41(0,"ion-badge",19),e.EFF(1,"Active"),e.k0s())}function y(n,c){if(1&n&&(e.j41(0,"p",20),e.EFF(1),e.nI1(2,"number"),e.nI1(3,"number"),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.Lme(" Coordinates: ",e.i5U(2,2,i.lat,"1.4-4"),", ",e.i5U(3,5,i.lng,"1.4-4")," ")}}function v(n,c){if(1&n){const i=e.RV6();e.j41(0,"ion-item",11)(1,"ion-label")(2,"div",12)(3,"h2",13),e.EFF(4),e.k0s(),e.DNE(5,x,2,0,"ion-badge",14),e.k0s(),e.j41(6,"p",15),e.EFF(7),e.k0s(),e.DNE(8,y,4,8,"p",16),e.k0s(),e.j41(9,"ion-button",17),e.bIt("click",function(){const t=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.deletePincodeWithToast(t._id))}),e.nrm(10,"ion-icon",18),e.k0s()()}if(2&n){const i=c.$implicit;e.R7$(4),e.JRh(i.pincode),e.R7$(),e.Y8G("ngIf",i.isActive),e.R7$(2),e.JRh(i.address),e.R7$(),e.Y8G("ngIf",i.lat&&i.lng)}}function C(n,c){1&n&&(e.j41(0,"p"),e.EFF(1,"Try adjusting your search terms"),e.k0s())}function M(n,c){1&n&&(e.j41(0,"p"),e.EFF(1,"Add your first pincode to get started"),e.k0s())}function T(n,c){if(1&n){const i=e.RV6();e.j41(0,"ion-button",25),e.bIt("click",function(){e.eBV(i);const t=e.XpG(2);return e.Njj(t.addNewPincode())}),e.EFF(1," Add Pincode "),e.k0s()}}function k(n,c){if(1&n&&(e.j41(0,"div",21),e.nrm(1,"ion-icon",22),e.j41(2,"h3"),e.EFF(3,"No pincodes found"),e.k0s(),e.DNE(4,C,2,0,"p",23)(5,M,2,0,"p",23)(6,T,2,0,"ion-button",24),e.k0s()),2&n){const i=e.XpG();e.R7$(4),e.Y8G("ngIf",i.searchTerm),e.R7$(),e.Y8G("ngIf",!i.searchTerm),e.R7$(),e.Y8G("ngIf",!i.searchTerm)}}const F=[{path:"",component:(()=>{var n;class c{constructor(o,t,r,a,l){this.alertController=o,this.auth=t,this.loadingController=r,this.toastController=a,this.data=l,this.savedPincodes=[],this.filteredPincodes=[],this.searchTerm="",this.subscriptions=new f.yU}ngOnInit(){console.log("PincodePage initialized"),this.getAllPincodes()}ngOnDestroy(){this.subscriptions.unsubscribe()}showToast(o){var t=this;return(0,p.A)(function*(){(yield t.toastController.create({message:o,duration:2e3,position:"bottom"})).present()})()}addNewPincode(){var o=this;return(0,p.A)(function*(){yield(yield o.alertController.create({header:"Add New Pincode",inputs:[{name:"pincode",type:"text",placeholder:"Enter pincode",attributes:{maxlength:10,inputmode:"numeric"}},{name:"address",type:"text",placeholder:"Enter address",attributes:{maxlength:200}},{name:"latitude",type:"number",placeholder:"Latitude (optional)",attributes:{step:"any"}},{name:"longitude",type:"number",placeholder:"Longitude (optional)",attributes:{step:"any"}}],buttons:[{text:"Cancel",role:"cancel"},{text:"Add",handler:r=>{if(r.pincode&&r.address){const a={pincode:r.pincode,address:r.address,lat:r.latitude?parseFloat(r.latitude):void 0,lng:r.longitude?parseFloat(r.longitude):void 0};o.addPincode(a)}else o.showToast("Please enter both pincode and address")}}]})).present()})()}addPincode(o){console.log("Pincode added:",o),this.subscriptions.add(this.auth.addPincode(o).subscribe({next:t=>{console.log("Pincode saved to server:",t),this.showToast("Pincode added successfully"),this.getAllPincodes()},error:t=>{console.error("Error saving pincode to server:",t),this.showToast("Error adding pincode")}}))}getAllPincodes(){var o=this;return(0,p.A)(function*(){const t=yield o.loadingController.create({message:"Loading pincodes..."});yield t.present(),o.subscriptions.add(o.auth.getAllPincode().subscribe({next:r=>{console.log("response"+r),console.log(r.data),o.savedPincodes=r.data,o.filteredPincodes=[...o.savedPincodes],t.dismiss()},error:r=>{console.error("Error fetching pincodes:",r),o.showToast("Error loading pincodes"),t.dismiss()}}))})()}filterPincodes(){if(this.searchTerm.trim()){const o=this.searchTerm.toLowerCase();this.filteredPincodes=this.savedPincodes.filter(t=>t.pincode.toLowerCase().includes(o)||t.address.toLowerCase().includes(o))}else this.filteredPincodes=[...this.savedPincodes]}deletePincodeWithToast(o){var t=this;return(0,p.A)(function*(){var a;console.log("pincode to delete:",o),yield(yield t.alertController.create({header:"Delete Pincode",message:"Are you sure you want to delete this pincode?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:(a=(0,p.A)(function*(){const l=yield t.loadingController.create({message:"Deleting pincode..."});yield l.present(),t.subscriptions.add(t.auth.deletePincode(o).subscribe({next:m=>{console.log("Pincode deleted:",m),l.dismiss(),t.getAllPincodes(),t.showToast("Pincode deleted successfully")},error:m=>{console.error("Error deleting pincode:",m),t.showToast("Error deleting pincode"),l.dismiss()}}))}),function(){return a.apply(this,arguments)})}]})).present()})()}}return(n=c).\u0275fac=function(o){return new(o||n)(e.rXU(s.hG),e.rXU(_.u),e.rXU(s.Xi),e.rXU(s.K_),e.rXU(b.u))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-pincode"]],decls:15,vars:5,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","add","slot","icon-only"],[3,"fullscreen"],[1,"pincode-container"],[1,"search-container"],["placeholder","Search pincodes...","show-clear-button","focus",3,"ngModelChange","ionInput","ngModel"],[1,"pincode-list"],["class","pincode-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"pincode-item"],[1,"pincode-header"],[1,"pincode-number"],["color","primary",4,"ngIf"],[1,"pincode-address"],["class","pincode-coordinates",4,"ngIf"],["fill","clear","color","danger","slot","end",3,"click"],["name","trash-outline","slot","icon-only"],["color","primary"],[1,"pincode-coordinates"],[1,"empty-state"],["name","location-outline",1,"empty-icon"],[4,"ngIf"],["fill","outline",3,"click",4,"ngIf"],["fill","outline",3,"click"]],template:function(o,t){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Pincode Management"),e.k0s(),e.j41(4,"ion-buttons",1)(5,"ion-button",2),e.bIt("click",function(){return t.addNewPincode()}),e.nrm(6,"ion-icon",3),e.k0s()()()(),e.j41(7,"ion-content",4)(8,"div",5)(9,"div",6)(10,"ion-searchbar",7),e.mxI("ngModelChange",function(a){return e.DH7(t.searchTerm,a)||(t.searchTerm=a),a}),e.bIt("ionInput",function(){return t.filterPincodes()}),e.k0s()(),e.j41(11,"div",8)(12,"ion-list"),e.DNE(13,v,11,4,"ion-item",9),e.k0s(),e.DNE(14,k,7,3,"div",10),e.k0s()()()),2&o&&(e.Y8G("translucent",!0),e.R7$(7),e.Y8G("fullscreen",!0),e.R7$(3),e.R50("ngModel",t.searchTerm),e.R7$(3),e.Y8G("ngForOf",t.filteredPincodes),e.R7$(),e.Y8G("ngIf",0===t.filteredPincodes.length))},dependencies:[g.Sq,g.bT,u.BC,u.vS,s.In,s.Jm,s.QW,s.W9,s.eU,s.iq,s.uz,s.he,s.nf,s.S1,s.BC,s.ai,s.Gw,g.QX],styles:[".pincode-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;background:var(--ion-color-light)}.search-container[_ngcontent-%COMP%]{padding:16px;background:#fff;border-bottom:1px solid var(--ion-color-light-shade)}.pincode-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.pincode-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 12px;--padding-bottom: 12px;margin:8px 16px;border-radius:12px;--background: white;--border-radius: 12px;box-shadow:0 2px 8px #0000001a;transition:all .2s ease}.pincode-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.pincode-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.pincode-number[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--ion-color-primary);margin:0}.pincode-address[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium);margin:4px 0;line-height:1.4}.pincode-coordinates[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium-shade);margin:4px 0 0;font-family:monospace}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:var(--ion-color-medium)}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px;line-height:1.4}ion-searchbar[_ngcontent-%COMP%]{--background: var(--ion-color-light);--border-radius: 12px;--box-shadow: none;--placeholder-color: var(--ion-color-medium)}ion-badge[_ngcontent-%COMP%]{font-size:10px;font-weight:500}.pincode-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.pincode-item[_ngcontent-%COMP%]{margin:6px 12px}.search-container[_ngcontent-%COMP%]{padding:12px}}"]}),c})()}];let I=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[P.iI.forChild(F),P.iI]}),c})(),O=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.MD,u.YN,s.bv,I]}),c})()}}]);