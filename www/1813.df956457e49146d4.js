"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1813],{1813:(C,f,p)=>{p.r(f),p.d(f,{DishPageModule:()=>G});var d=p(177),a=p(4341),s=p(4488),g=p(8986),h=p(467),v=p(5312),e=p(4438),k=p(4796),F=p(1626);const b=()=>[0,.25,.5,.75];function D(n,c){if(1&n&&(e.j41(0,"ion-select-option",33),e.EFF(1),e.k0s()),2&n){const r=c.$implicit;e.Y8G("value",r._id),e.R7$(),e.JRh(r.hotelName)}}function y(n,c){if(1&n&&(e.j41(0,"ion-select-option",33),e.EFF(1),e.k0s()),2&n){const r=c.$implicit;e.Y8G("value",r._id),e.R7$(),e.JRh(r.name)}}function j(n,c){if(1&n&&e.nrm(0,"img",34),2&n){let r;const t=e.XpG().$implicit;e.Y8G("src",null==(r=t.get("image_url"))?null:r.value,e.B4B)}}function P(n,c){if(1&n){const r=e.RV6();e.j41(0,"div",14)(1,"ion-item")(2,"ion-label"),e.EFF(3,"Choose Hotel"),e.k0s(),e.j41(4,"ion-select",15),e.DNE(5,D,2,2,"ion-select-option",16),e.k0s()(),e.j41(6,"ion-item")(7,"ion-label"),e.EFF(8,"Choose Category"),e.k0s(),e.j41(9,"ion-select",17),e.DNE(10,y,2,2,"ion-select-option",16),e.k0s()(),e.nrm(11,"ion-input",18),e.j41(12,"ion-item")(13,"ion-label"),e.EFF(14,"Dish Type"),e.k0s(),e.j41(15,"ion-select",19)(16,"ion-select-option",20),e.EFF(17,"Veg"),e.k0s(),e.j41(18,"ion-select-option",21),e.EFF(19,"Non-veg"),e.k0s()()(),e.nrm(20,"ion-input",22)(21,"ion-input",23),e.j41(22,"ion-item")(23,"ion-label"),e.EFF(24,"Spice Level"),e.k0s(),e.j41(25,"ion-select",24)(26,"ion-select-option",25),e.EFF(27,"No Spicy"),e.k0s(),e.j41(28,"ion-select-option",26),e.EFF(29,"Medium Spicy"),e.k0s(),e.j41(30,"ion-select-option",27),e.EFF(31,"Extra Spicy"),e.k0s(),e.j41(32,"ion-select-option",28),e.EFF(33,"Very Spicy"),e.k0s()()(),e.j41(34,"ion-item")(35,"ion-label"),e.EFF(36,"Stock"),e.k0s(),e.j41(37,"ion-select",29)(38,"ion-select-option",26),e.EFF(39,"Yes"),e.k0s(),e.j41(40,"ion-select-option",25),e.EFF(41,"No"),e.k0s()()(),e.j41(42,"div")(43,"label"),e.EFF(44,"Image"),e.k0s(),e.j41(45,"input",30),e.bIt("change",function(i){const o=e.eBV(r).index,l=e.XpG();return e.Njj(l.onFileChange(i,o))}),e.k0s(),e.DNE(46,j,1,1,"img",31),e.k0s(),e.j41(47,"button",32),e.bIt("click",function(){const i=e.eBV(r).index,o=e.XpG();return e.Njj(o.removeDish(i))}),e.EFF(48,"Remove"),e.k0s()()}if(2&n){let r;const t=c.$implicit,i=c.index,o=e.XpG();e.Y8G("formGroupName",i),e.R7$(5),e.Y8G("ngForOf",o.hotels),e.R7$(5),e.Y8G("ngForOf",o.categories),e.R7$(36),e.Y8G("ngIf",null==(r=t.get("image_url"))?null:r.value)}}function I(n,c){if(1&n){const r=e.RV6();e.j41(0,"ion-header",35)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Upload a Hotel Image"),e.k0s(),e.j41(4,"ion-buttons",36)(5,"ion-button",37),e.bIt("click",function(){e.eBV(r);const i=e.XpG();return e.Njj(i.setOpen(!1))}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",38)(8,"div",39)(9,"input",40,0),e.bIt("change",function(i){e.eBV(r);const o=e.XpG();return e.Njj(o.uploadImage(i))}),e.k0s(),e.j41(11,"ion-button",41),e.bIt("click",function(){e.eBV(r);const i=e.sdS(10);return e.Njj(i.click())}),e.EFF(12," Select and Upload "),e.k0s()()()}}const E=[{path:"",component:(()=>{var n;class c{constructor(t,i,o,l,u,m){this.auth=t,this.router=i,this.toastController=o,this.fb=l,this.loadingController=u,this.http=m,this.hotels=[],this.categories=[],this.isDishImageUploadModalOpen=!1,this.form=this.fb.group({dishes:this.fb.array([this.createDishFormGroup()])})}ngOnInit(){}ionViewDidEnter(){this.loadCategory(),this.getAllHotels()}createDishFormGroup(){return this.fb.group({hotelId:["",[a.k0.required]],categoryId:["",[a.k0.required]],name:["",[a.k0.required]],dishType:["",[a.k0.required]],partnerPrice:["",[a.k0.required]],userPrice:["",[a.k0.required]],spicLevel:["",[a.k0.required]],stock:["",[a.k0.required]],image_url:["",[a.k0.required]],status:[2],timeToPrepare:[30]})}get dishes(){return this.form.get("dishes")}addDish(){this.dishes.push(this.createDishFormGroup())}removeDish(t){this.dishes.removeAt(t)}loadCategory(){var i,t=this;this.auth.getAllCategory().subscribe({next:(i=(0,h.A)(function*(o){console.log(o),t.categories=o.data.content}),function(l){return i.apply(this,arguments)}),error:function(){var i=(0,h.A)(function*(o){console.log(o.error)});return function(l){return i.apply(this,arguments)}}()})}presentToast(t,i,o,l){var u=this;return(0,h.A)(function*(){(yield u.toastController.create({message:t,duration:i,color:o,position:l})).present()})()}uploadImage(t){var i=this;let o=t.target.files[0];console.log(o);let l=new FormData;var u;l.append("document",o,o.name),l.append("dishId",this.dishId),this.auth.uploadDishImage(l).subscribe({next:(u=(0,h.A)(function*(m){console.log(m),i.setOpen(!1)}),function(_){return u.apply(this,arguments)}),error:function(){var u=(0,h.A)(function*(m){console.log(m),i.presentToast("Image Upload Failed",2e3,"danger","bottom")});return function(_){return u.apply(this,arguments)}}()})}setOpen(t){this.isDishImageUploadModalOpen=t}onSubmit(){var t=this;return(0,h.A)(function*(){t.form.valid&&(console.log(t.form.value),t.auth.addProduct(t.form.value).subscribe({next:i=>{console.log(i),t.presentToast("Dish Addedd Successfully",2e3,"success","bottom"),setTimeout(()=>{t.router.navigate(["folder","partners"])},2e3)},error:i=>{console.log(i.error)}}))})()}getAllHotels(){var t=this;return(0,h.A)(function*(){let i=yield t.loadingController.create({message:"loading..."});var o;yield i.present(),t.auth.getAllHotelsPartner().subscribe({next:(o=(0,h.A)(function*(l){console.log(l),t.hotels=l.data,yield i.dismiss()}),function(u){return o.apply(this,arguments)}),error:function(){var o=(0,h.A)(function*(l){console.log(l),yield i.dismiss()});return function(u){return o.apply(this,arguments)}}()})})()}viewNotifications(){}onFileChange(t,i){const o=t.target.files[0];if(o){const l=new FormData;l.append("image",o),this.http.post(v.c.URL+"admin/upload/image",l).subscribe(u=>{this.form.get("dishes").at(i).patchValue({image_url:u.data})},u=>{console.error("Error uploading file:",u)})}}}return(n=c).\u0275fac=function(t){return new(t||n)(e.rXU(k.u),e.rXU(g.Ix),e.rXU(s.K_),e.rXU(a.ok),e.rXU(s.Xi),e.rXU(F.Qq))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-dish"]],decls:22,vars:8,consts:[["f",""],[3,"translucent"],["color","primary","slot","end","fill","clear",3,"click"],["slot","icon-only","name","notifications-circle-outline"],["slot","icon-only","name","chatbox-ellipses-outline"],[3,"fullscreen"],["fixed",""],["size","6"],[3,"ngSubmit","formGroup"],["formArrayName","dishes"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button","fill","solid",3,"click"],["type","submit","fill","solid"],[3,"isOpen","initialBreakpoint","breakpoints"],[3,"formGroupName"],["formControlName","hotelId","interface","action-sheet","placeholder","Select Hotel"],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoryId","interface","action-sheet","placeholder","Select Category"],["type","text","placeholder","","label","Menu name","labelPlacement","stacked","formControlName","name","fill","outline"],["formControlName","dishType","value","veg","multiple","false","placeholder","Select Type"],["value","veg"],["value","non-veg"],["type","text","placeholder","","label","Partner price","labelPlacement","stacked","formControlName","partnerPrice","fill","outline"],["type","text","placeholder","","label","User price","labelPlacement","stacked","formControlName","userPrice","fill","outline"],["value","0","multiple","false","placeholder","Select Spice Level","formControlName","spicLevel"],["value","0"],["value","1"],["value","2"],["value","3"],["value","1","multiple","false","placeholder","Select Stock","formControlName","stock"],["type","file",3,"change"],["crossorigin","anonymous","style","height: 200px; width:auto;","alt","Image Preview","width","100",3,"src",4,"ngIf"],["type","button",3,"click"],[3,"value"],["crossorigin","anonymous","alt","Image Preview","width","100",2,"height","200px","width","auto",3,"src"],[1,"ion-no-border"],["slot","end"],[3,"click"],[1,"ion-padding"],[1,"image-upload-container"],["hidden","","type","file","name","","id","",3,"change"],["expand","block","fill","outline","shape","round",3,"click"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Dish"),e.k0s(),e.j41(4,"ion-button",2),e.bIt("click",function(){return i.viewNotifications()}),e.nrm(5,"ion-icon",3),e.k0s(),e.j41(6,"ion-button",2),e.bIt("click",function(){return i.viewNotifications()}),e.nrm(7,"ion-icon",4),e.k0s()()(),e.j41(8,"ion-content",5)(9,"ion-grid",6)(10,"ion-row")(11,"ion-col",7)(12,"form",8),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(13,"div",9),e.DNE(14,P,49,4,"div",10),e.k0s(),e.j41(15,"ion-button",11),e.bIt("click",function(){return i.addDish()}),e.EFF(16,"Add Dish"),e.k0s(),e.j41(17,"ion-button",12),e.EFF(18,"Submit"),e.k0s()()(),e.nrm(19,"ion-col",7),e.k0s()(),e.j41(20,"ion-modal",13),e.DNE(21,I,13,0,"ng-template"),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(8),e.Y8G("fullscreen",!0),e.R7$(4),e.Y8G("formGroup",i.form),e.R7$(2),e.Y8G("ngForOf",i.dishes.controls),e.R7$(6),e.Y8G("isOpen",i.isDishImageUploadModalOpen)("initialBreakpoint",.75)("breakpoints",e.lJ4(7,b)))},dependencies:[d.Sq,d.bT,a.qT,a.BC,a.cb,a.j4,a.JD,a.$R,a.v8,s.Jm,s.QW,s.hU,s.W9,s.lO,s.eU,s.iq,s.$w,s.uz,s.he,s.ln,s.Nm,s.Ip,s.BC,s.ai,s.Sb,s.Je,s.Gw]}),c})()}];let N=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.iI.forChild(E),g.iI]}),c})(),G=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.MD,a.YN,a.X1,s.bv,N]}),c})()}}]);