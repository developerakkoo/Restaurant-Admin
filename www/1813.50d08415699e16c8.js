"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1813],{1813:(G,k,c)=>{c.r(k),c.d(k,{DishPageModule:()=>N});var f=c(177),r=c(4341),l=c(4488),m=c(8986),d=c(467),F=c(5312),e=c(4438),_=c(4796),v=c(1626);const b=()=>[0,.25,.5,.75];function j(i,a){if(1&i&&(e.j41(0,"ion-select-option",35),e.EFF(1),e.k0s()),2&i){const s=a.$implicit;e.Y8G("value",s._id),e.R7$(),e.JRh(s.name)}}function D(i,a){if(1&i&&e.nrm(0,"img",36),2&i){let s;const t=e.XpG().$implicit;e.Y8G("src",null==(s=t.get("image_url"))?null:s.value,e.B4B)}}function y(i,a){if(1&i){const s=e.RV6();e.j41(0,"tr",14)(1,"th"),e.nrm(2,"input",15),e.j41(3,"p"),e.EFF(4,"Don't change this value."),e.k0s()(),e.j41(5,"th")(6,"ion-select",16),e.DNE(7,j,2,2,"ion-select-option",17),e.k0s()(),e.j41(8,"th"),e.nrm(9,"ion-input",18),e.k0s(),e.j41(10,"th")(11,"ion-select",19)(12,"ion-select-option",20),e.EFF(13,"Veg"),e.k0s(),e.j41(14,"ion-select-option",21),e.EFF(15,"Non-veg"),e.k0s()()(),e.j41(16,"th"),e.nrm(17,"ion-input",22),e.k0s(),e.j41(18,"th"),e.nrm(19,"ion-input",23),e.k0s(),e.j41(20,"th")(21,"ion-select",24)(22,"ion-select-option",25),e.EFF(23,"No Spicy"),e.k0s(),e.j41(24,"ion-select-option",26),e.EFF(25,"Medium Spicy"),e.k0s(),e.j41(26,"ion-select-option",27),e.EFF(27,"Extra Spicy"),e.k0s(),e.j41(28,"ion-select-option",28),e.EFF(29,"Very Spicy"),e.k0s()()(),e.j41(30,"th")(31,"ion-select",29)(32,"ion-select-option",26),e.EFF(33,"Yes"),e.k0s(),e.j41(34,"ion-select-option",25),e.EFF(35,"No"),e.k0s()()(),e.j41(36,"th")(37,"div")(38,"label"),e.EFF(39,"Image"),e.k0s(),e.j41(40,"input",30),e.bIt("change",function(o){const n=e.eBV(s).index,u=e.XpG();return e.Njj(u.onFileChange(o,n))}),e.k0s(),e.DNE(41,D,1,1,"img",31),e.k0s()(),e.j41(42,"th")(43,"ion-button",32),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.addDish())}),e.EFF(44,"Add Dish"),e.k0s(),e.j41(45,"ion-button",33),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.onSubmit())}),e.EFF(46,"Submit"),e.k0s(),e.j41(47,"ion-button",34),e.bIt("click",function(){const o=e.eBV(s).index,n=e.XpG();return e.Njj(n.removeDish(o))}),e.EFF(48," remove "),e.k0s()()()}if(2&i){let s;const t=a.$implicit,o=a.index,n=e.XpG();e.Y8G("formGroupName",o),e.R7$(2),e.Y8G("value",n.hotelId),e.R7$(5),e.Y8G("ngForOf",n.categories),e.R7$(34),e.Y8G("ngIf",null==(s=t.get("image_url"))?null:s.value)}}function P(i,a){if(1&i){const s=e.RV6();e.j41(0,"ion-header",37)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Upload a Hotel Image"),e.k0s(),e.j41(4,"ion-buttons",38)(5,"ion-button",39),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.setOpen(!1))}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",40)(8,"div",41)(9,"input",42,0),e.bIt("change",function(o){e.eBV(s);const n=e.XpG();return e.Njj(n.uploadImage(o))}),e.k0s(),e.j41(11,"ion-button",43),e.bIt("click",function(){e.eBV(s);const o=e.sdS(10);return e.Njj(o.click())}),e.EFF(12," Select and Upload "),e.k0s()()()}}const I=[{path:"",component:(()=>{var i;class a{constructor(t,o,n,u,h,p,g){this.auth=t,this.router=o,this.route=n,this.toastController=u,this.fb=h,this.loadingController=p,this.http=g,this.hotels=[],this.categories=[],this.isDishImageUploadModalOpen=!1,this.hotelId=this.route.snapshot.paramMap.get("id"),console.log(this.hotelId),this.loadCategory(),this.getAllHotels(),this.form=this.fb.group({dishes:this.fb.array([this.createDishFormGroup()])})}ngOnInit(){console.log("Dish Page")}ionViewDidEnter(){}createDishFormGroup(){return console.log(this.hotelId),this.fb.group({hotelId:[this.hotelId,[r.k0.required]],categoryId:["",[r.k0.required]],name:["",[r.k0.required]],dishType:["",[r.k0.required]],partnerPrice:["",[r.k0.required]],userPrice:["",[r.k0.required]],spicLevel:["",[r.k0.required]],stock:["",[r.k0.required]],image_url:["",[r.k0.required]],status:[2],timeToPrepare:[30]})}get dishes(){return this.form.get("dishes")}addDish(){this.dishes.push(this.createDishFormGroup())}removeDish(t){this.dishes.removeAt(t)}loadCategory(){var o,t=this;this.auth.getAllCategory().subscribe({next:(o=(0,d.A)(function*(n){console.log(n),t.categories=n.data.content}),function(u){return o.apply(this,arguments)}),error:function(){var o=(0,d.A)(function*(n){console.log(n.error)});return function(u){return o.apply(this,arguments)}}()})}presentToast(t,o,n,u){var h=this;return(0,d.A)(function*(){(yield h.toastController.create({message:t,duration:o,color:n,position:u})).present()})()}uploadImage(t){var o=this;let n=t.target.files[0];console.log(n);let u=new FormData;var h;u.append("document",n,n.name),u.append("dishId",this.dishId),this.auth.uploadDishImage(u).subscribe({next:(h=(0,d.A)(function*(p){console.log(p),o.setOpen(!1)}),function(g){return h.apply(this,arguments)}),error:function(){var h=(0,d.A)(function*(p){console.log(p),o.presentToast("Image Upload Failed",2e3,"danger","bottom")});return function(g){return h.apply(this,arguments)}}()})}setOpen(t){this.isDishImageUploadModalOpen=t}onSubmit(){var t=this;return(0,d.A)(function*(){t.form.invalid&&(console.log(t.form.value),console.log("Foerm Invalid")),t.form.valid&&(console.log(t.form.value),t.auth.addProduct(t.form.value).subscribe({next:o=>{console.log(o),t.presentToast("Dish Addedd Successfully",2e3,"success","bottom"),setTimeout(()=>{t.router.navigate(["folder","partners"])},2e3)},error:o=>{console.log(o.error)}}))})()}getAllHotels(){return(0,d.A)(function*(){})()}viewNotifications(){}onFileChange(t,o){const n=t.target.files[0];if(n){const u=new FormData;u.append("image",n),this.http.post(F.c.URL+"admin/upload/image",u).subscribe(h=>{this.form.get("dishes").at(o).patchValue({image_url:h.data})},h=>{console.error("Error uploading file:",h)})}}}return(i=a).\u0275fac=function(t){return new(t||i)(e.rXU(_.u),e.rXU(m.Ix),e.rXU(m.nX),e.rXU(l.K_),e.rXU(r.ok),e.rXU(l.Xi),e.rXU(v.Qq))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-dish"]],decls:42,vars:8,consts:[["f",""],[3,"translucent"],["color","primary","slot","end","fill","clear",3,"click"],["slot","icon-only","name","notifications-circle-outline"],["slot","icon-only","name","chatbox-ellipses-outline"],[3,"fullscreen"],["size","12"],[3,"formGroup"],["formArrayName","dishes",1,"table-responsive"],[1,"table"],["scope","col"],[3,"formGroupName",4,"ngFor","ngForOf"],["size","6"],[3,"isOpen","initialBreakpoint","breakpoints"],[3,"formGroupName"],["type","text","readonly","true","formControlName","hotelId",2,"width","30px",3,"value"],["formControlName","categoryId","interface","action-sheet","placeholder","Select Category","multiple","false"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","","label","Menu name","labelPlacement","stacked","formControlName","name","fill","outline"],["formControlName","dishType","value","veg","multiple","false","placeholder","Select Type"],["value","veg"],["value","non-veg"],["type","text","placeholder","","label","Partner price","labelPlacement","stacked","formControlName","partnerPrice","fill","outline"],["type","text","placeholder","","label","User price","labelPlacement","stacked","formControlName","userPrice","fill","outline"],["value","0","multiple","false","placeholder","Select Spice Level","formControlName","spicLevel"],["value","0"],["value","1"],["value","2"],["value","3"],["value","1","multiple","false","placeholder","Select Stock","formControlName","stock"],["type","file",3,"change"],["crossorigin","anonymous","style","height: 200px; width: auto","alt","Image Preview","width","100",3,"src",4,"ngIf"],["type","button","fill","solid",3,"click"],["type","submit","fill","solid",3,"click"],["expand","block","color","danger",3,"click"],[3,"value"],["crossorigin","anonymous","alt","Image Preview","width","100",2,"height","200px","width","auto",3,"src"],[1,"ion-no-border"],["slot","end"],[3,"click"],[1,"ion-padding"],[1,"image-upload-container"],["hidden","","type","file","name","","id","",3,"change"],["expand","block","fill","outline","shape","round",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Dish"),e.k0s(),e.j41(4,"ion-button",2),e.bIt("click",function(){return o.viewNotifications()}),e.nrm(5,"ion-icon",3),e.k0s(),e.j41(6,"ion-button",2),e.bIt("click",function(){return o.viewNotifications()}),e.nrm(7,"ion-icon",4),e.k0s()()(),e.j41(8,"ion-content",5)(9,"ion-grid")(10,"ion-row")(11,"ion-col",6)(12,"form",7)(13,"div",8)(14,"table",9)(15,"thead")(16,"tr")(17,"th"),e.EFF(18,"HotelId"),e.k0s(),e.j41(19,"th",10),e.EFF(20,"Category"),e.k0s(),e.j41(21,"th",10),e.EFF(22,"Menu Name"),e.k0s(),e.j41(23,"th",10),e.EFF(24,"Dish Type"),e.k0s(),e.j41(25,"th",10),e.EFF(26,"Partner Price"),e.k0s(),e.j41(27,"th",10),e.EFF(28,"User Price"),e.k0s(),e.j41(29,"th",10),e.EFF(30,"Spice Level"),e.k0s(),e.j41(31,"th",10),e.EFF(32,"Stock"),e.k0s(),e.j41(33,"th",10),e.EFF(34,"Image"),e.k0s(),e.j41(35,"th"),e.EFF(36,"Action"),e.k0s()()(),e.nrm(37,"tbody"),e.DNE(38,y,49,4,"tr",11),e.k0s()()()(),e.nrm(39,"ion-col",12),e.k0s()(),e.j41(40,"ion-modal",13),e.DNE(41,P,13,0,"ng-template"),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(8),e.Y8G("fullscreen",!0),e.R7$(4),e.Y8G("formGroup",o.form),e.R7$(26),e.Y8G("ngForOf",o.dishes.controls),e.R7$(2),e.Y8G("isOpen",o.isDishImageUploadModalOpen)("initialBreakpoint",.75)("breakpoints",e.lJ4(7,b)))},dependencies:[f.Sq,f.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.$R,r.v8,l.Jm,l.QW,l.hU,l.W9,l.lO,l.eU,l.iq,l.$w,l.ln,l.Nm,l.Ip,l.BC,l.ai,l.Sb,l.Je,l.Gw]}),a})()},{path:"view/:id",loadChildren:()=>c.e(5857).then(c.bind(c,5857)).then(i=>i.ViewPageModule)}];let E=(()=>{var i;class a{}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[m.iI.forChild(I),m.iI]}),a})(),N=(()=>{var i;class a{}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[f.MD,r.YN,r.X1,l.bv,E]}),a})()}}]);