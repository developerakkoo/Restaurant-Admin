"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1813],{1813:(C,f,u)=>{u.r(f),u.d(f,{DishPageModule:()=>G});var d=u(177),r=u(4341),l=u(4488),g=u(8986),h=u(467),v=u(5312),e=u(4438),k=u(4796),F=u(1626);const b=()=>[0,.25,.5,.75];function D(o,a){if(1&o&&(e.j41(0,"ion-select-option",33),e.EFF(1),e.k0s()),2&o){const s=a.$implicit;e.Y8G("value",s._id),e.R7$(),e.JRh(s.hotelName)}}function j(o,a){if(1&o&&(e.j41(0,"ion-select-option",33),e.EFF(1),e.k0s()),2&o){const s=a.$implicit;e.Y8G("value",s._id),e.R7$(),e.JRh(s.name)}}function y(o,a){if(1&o&&e.nrm(0,"img",34),2&o){let s;const t=e.XpG().$implicit;e.Y8G("src",null==(s=t.get("image_url"))?null:s.value,e.B4B)}}function P(o,a){if(1&o){const s=e.RV6();e.j41(0,"div",14)(1,"ion-item")(2,"ion-label"),e.EFF(3,"Choose Hotel"),e.k0s(),e.j41(4,"ion-select",15),e.DNE(5,D,2,2,"ion-select-option",16),e.k0s()(),e.j41(6,"ion-item")(7,"ion-label"),e.EFF(8,"Choose Category"),e.k0s(),e.j41(9,"ion-select",17),e.DNE(10,j,2,2,"ion-select-option",16),e.k0s()(),e.nrm(11,"ion-input",18),e.j41(12,"ion-item")(13,"ion-label"),e.EFF(14,"Dish Type"),e.k0s(),e.j41(15,"ion-select",19)(16,"ion-select-option",20),e.EFF(17,"Veg"),e.k0s(),e.j41(18,"ion-select-option",21),e.EFF(19,"Non-veg"),e.k0s()()(),e.nrm(20,"ion-input",22)(21,"ion-input",23),e.j41(22,"ion-item")(23,"ion-label"),e.EFF(24,"Spice Level"),e.k0s(),e.j41(25,"ion-select",24)(26,"ion-select-option",25),e.EFF(27,"No Spicy"),e.k0s(),e.j41(28,"ion-select-option",26),e.EFF(29,"Medium Spicy"),e.k0s(),e.j41(30,"ion-select-option",27),e.EFF(31,"Extra Spicy"),e.k0s(),e.j41(32,"ion-select-option",28),e.EFF(33,"Very Spicy"),e.k0s()()(),e.j41(34,"ion-item")(35,"ion-label"),e.EFF(36,"Stock"),e.k0s(),e.j41(37,"ion-select",29)(38,"ion-select-option",26),e.EFF(39,"Yes"),e.k0s(),e.j41(40,"ion-select-option",25),e.EFF(41,"No"),e.k0s()()(),e.j41(42,"div")(43,"label"),e.EFF(44,"Image"),e.k0s(),e.j41(45,"input",30),e.bIt("change",function(i){const n=e.eBV(s).index,c=e.XpG();return e.Njj(c.onFileChange(i,n))}),e.k0s(),e.DNE(46,y,1,1,"img",31),e.k0s(),e.j41(47,"button",32),e.bIt("click",function(){const i=e.eBV(s).index,n=e.XpG();return e.Njj(n.removeDish(i))}),e.EFF(48,"Remove"),e.k0s()()}if(2&o){let s;const t=a.$implicit,i=a.index,n=e.XpG();e.Y8G("formGroupName",i),e.R7$(5),e.Y8G("ngForOf",n.hotels),e.R7$(5),e.Y8G("ngForOf",n.categories),e.R7$(36),e.Y8G("ngIf",null==(s=t.get("image_url"))?null:s.value)}}function I(o,a){if(1&o){const s=e.RV6();e.j41(0,"ion-header",35)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Upload a Hotel Image"),e.k0s(),e.j41(4,"ion-buttons",36)(5,"ion-button",37),e.bIt("click",function(){e.eBV(s);const i=e.XpG();return e.Njj(i.setOpen(!1))}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",38)(8,"div",39)(9,"input",40,0),e.bIt("change",function(i){e.eBV(s);const n=e.XpG();return e.Njj(n.uploadImage(i))}),e.k0s(),e.j41(11,"ion-button",41),e.bIt("click",function(){e.eBV(s);const i=e.sdS(10);return e.Njj(i.click())}),e.EFF(12," Select and Upload "),e.k0s()()()}}const E=[{path:"",component:(()=>{var o;class a{constructor(t,i,n,c,p,m){this.auth=t,this.router=i,this.toastController=n,this.fb=c,this.loadingController=p,this.http=m,this.hotels=[],this.categories=[],this.isDishImageUploadModalOpen=!1,this.form=this.fb.group({dishes:this.fb.array([this.createDishFormGroup()])})}ngOnInit(){}ionViewDidEnter(){this.loadCategory(),this.getAllHotels()}createDishFormGroup(){return this.fb.group({hotelId:["",[r.k0.required]],categoryId:["",[r.k0.required]],name:["",[r.k0.required]],dishType:["",[r.k0.required]],partnerPrice:["",[r.k0.required]],userPrice:["",[r.k0.required]],spicLevel:["",[r.k0.required]],stock:["",[r.k0.required]],image_url:["",[r.k0.required]],status:[2],timeToPrepare:[30]})}get dishes(){return this.form.get("dishes")}addDish(){this.dishes.push(this.createDishFormGroup())}removeDish(t){this.dishes.removeAt(t)}loadCategory(){var i,t=this;this.auth.getAllCategory().subscribe({next:(i=(0,h.A)(function*(n){console.log(n),t.categories=n.data.content}),function(c){return i.apply(this,arguments)}),error:function(){var i=(0,h.A)(function*(n){console.log(n.error)});return function(c){return i.apply(this,arguments)}}()})}presentToast(t,i,n,c){var p=this;return(0,h.A)(function*(){(yield p.toastController.create({message:t,duration:i,color:n,position:c})).present()})()}uploadImage(t){var i=this;let n=t.target.files[0];console.log(n);let c=new FormData;var p;c.append("document",n,n.name),c.append("dishId",this.dishId),this.auth.uploadDishImage(c).subscribe({next:(p=(0,h.A)(function*(m){console.log(m),i.setOpen(!1)}),function(_){return p.apply(this,arguments)}),error:function(){var p=(0,h.A)(function*(m){console.log(m),i.presentToast("Image Upload Failed",2e3,"danger","bottom")});return function(_){return p.apply(this,arguments)}}()})}setOpen(t){this.isDishImageUploadModalOpen=t}onSubmit(){var t=this;return(0,h.A)(function*(){t.form.valid&&(console.log(t.form.value),t.auth.addProduct(t.form.value).subscribe({next:i=>{console.log(i),t.presentToast("Dish Addedd Successfully",2e3,"success","bottom"),setTimeout(()=>{t.router.navigate(["folder","partners"])},2e3)},error:i=>{console.log(i.error)}}))})()}getAllHotels(){return(0,h.A)(function*(){})()}viewNotifications(){}onFileChange(t,i){const n=t.target.files[0];if(n){const c=new FormData;c.append("image",n),this.http.post(v.c.URL+"admin/upload/image",c).subscribe(p=>{this.form.get("dishes").at(i).patchValue({image_url:p.data})},p=>{console.error("Error uploading file:",p)})}}}return(o=a).\u0275fac=function(t){return new(t||o)(e.rXU(k.u),e.rXU(g.Ix),e.rXU(l.K_),e.rXU(r.ok),e.rXU(l.Xi),e.rXU(F.Qq))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-dish"]],decls:22,vars:8,consts:[["f",""],[3,"translucent"],["color","primary","slot","end","fill","clear",3,"click"],["slot","icon-only","name","notifications-circle-outline"],["slot","icon-only","name","chatbox-ellipses-outline"],[3,"fullscreen"],["fixed",""],["size","6"],[3,"ngSubmit","formGroup"],["formArrayName","dishes"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button","fill","solid",3,"click"],["type","submit","fill","solid"],[3,"isOpen","initialBreakpoint","breakpoints"],[3,"formGroupName"],["formControlName","hotelId","interface","action-sheet","placeholder","Select Hotel"],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoryId","interface","action-sheet","placeholder","Select Category"],["type","text","placeholder","","label","Menu name","labelPlacement","stacked","formControlName","name","fill","outline"],["formControlName","dishType","value","veg","multiple","false","placeholder","Select Type"],["value","veg"],["value","non-veg"],["type","text","placeholder","","label","Partner price","labelPlacement","stacked","formControlName","partnerPrice","fill","outline"],["type","text","placeholder","","label","User price","labelPlacement","stacked","formControlName","userPrice","fill","outline"],["value","0","multiple","false","placeholder","Select Spice Level","formControlName","spicLevel"],["value","0"],["value","1"],["value","2"],["value","3"],["value","1","multiple","false","placeholder","Select Stock","formControlName","stock"],["type","file",3,"change"],["crossorigin","anonymous","style","height: 200px; width:auto;","alt","Image Preview","width","100",3,"src",4,"ngIf"],["type","button",3,"click"],[3,"value"],["crossorigin","anonymous","alt","Image Preview","width","100",2,"height","200px","width","auto",3,"src"],[1,"ion-no-border"],["slot","end"],[3,"click"],[1,"ion-padding"],[1,"image-upload-container"],["hidden","","type","file","name","","id","",3,"change"],["expand","block","fill","outline","shape","round",3,"click"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Dish"),e.k0s(),e.j41(4,"ion-button",2),e.bIt("click",function(){return i.viewNotifications()}),e.nrm(5,"ion-icon",3),e.k0s(),e.j41(6,"ion-button",2),e.bIt("click",function(){return i.viewNotifications()}),e.nrm(7,"ion-icon",4),e.k0s()()(),e.j41(8,"ion-content",5)(9,"ion-grid",6)(10,"ion-row")(11,"ion-col",7)(12,"form",8),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(13,"div",9),e.DNE(14,P,49,4,"div",10),e.k0s(),e.j41(15,"ion-button",11),e.bIt("click",function(){return i.addDish()}),e.EFF(16,"Add Dish"),e.k0s(),e.j41(17,"ion-button",12),e.EFF(18,"Submit"),e.k0s()()(),e.nrm(19,"ion-col",7),e.k0s()(),e.j41(20,"ion-modal",13),e.DNE(21,I,13,0,"ng-template"),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(8),e.Y8G("fullscreen",!0),e.R7$(4),e.Y8G("formGroup",i.form),e.R7$(2),e.Y8G("ngForOf",i.dishes.controls),e.R7$(6),e.Y8G("isOpen",i.isDishImageUploadModalOpen)("initialBreakpoint",.75)("breakpoints",e.lJ4(7,b)))},dependencies:[d.Sq,d.bT,r.qT,r.BC,r.cb,r.j4,r.JD,r.$R,r.v8,l.Jm,l.QW,l.hU,l.W9,l.lO,l.eU,l.iq,l.$w,l.uz,l.he,l.ln,l.Nm,l.Ip,l.BC,l.ai,l.Sb,l.Je,l.Gw]}),a})()}];let N=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(E),g.iI]}),a})(),G=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[d.MD,r.YN,r.X1,l.bv,N]}),a})()}}]);