"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4310],{4310:(R,d,u)=>{u.r(d),u.d(d,{BannerPageModule:()=>P});var m=u(177),_=u(4341),a=u(4488),f=u(8986),p=u(467),e=u(4438);let h=(()=>{var o;class s{constructor(n){this.el=n}ngOnChanges(n){if(n.appRemoveport&&this.appRemoveport)try{const t=new URL(this.appRemoveport);t.port?(t.port="",this.el.nativeElement.src=t.toString()):this.el.nativeElement.src=this.appRemoveport}catch(t){console.error("Error in RemovePortDirective while parsing URL:",t),this.el.nativeElement.src=this.appRemoveport}}}return(o=s).\u0275fac=function(n){return new(n||o)(e.rXU(e.aKT))},o.\u0275dir=e.FsC({type:o,selectors:[["","appRemoveport",""]],inputs:{appRemoveport:"appRemoveport"},features:[e.OA$]}),s})(),v=(()=>{var o;class s{constructor(n){this.modalController=n}closeModal(){this.modalController.dismiss()}}return(o=s).\u0275fac=function(n){return new(n||o)(e.rXU(a.W3))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-image-modal"]],inputs:{imageUrl:"imageUrl"},decls:4,vars:1,consts:[[1,"modal-container"],["crossorigin","anonymous","alt","Full Image",1,"full-image",3,"appRemoveport"],[1,"close-button",3,"click"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.nrm(1,"img",1),e.j41(2,"ion-button",2),e.bIt("click",function(){return t.closeModal()}),e.EFF(3,"Close"),e.k0s()()),2&n&&(e.R7$(),e.Y8G("appRemoveport",t.imageUrl))},dependencies:[a.Jm,h],styles:[".modal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;background:#000c}.full-image[_ngcontent-%COMP%]{max-width:90%;max-height:80%;border-radius:8px}.close-button[_ngcontent-%COMP%]{margin-top:20px}"]}),s})();var b=u(4796);function B(o,s){1&o&&(e.j41(0,"span",11),e.EFF(1," Home "),e.k0s())}function y(o,s){1&o&&(e.j41(0,"span",11),e.EFF(1," Cart "),e.k0s())}function I(o,s){1&o&&(e.j41(0,"span",11),e.EFF(1," Profile "),e.k0s())}function F(o,s){if(1&o){const l=e.RV6();e.j41(0,"div",7)(1,"img",8),e.bIt("click",function(){const t=e.eBV(l).$implicit,i=e.XpG();return e.Njj(i.openImageModal(t.image_url))}),e.k0s(),e.DNE(2,B,2,0,"span",9)(3,y,2,0,"span",9)(4,I,2,0,"span",9),e.j41(5,"span",10),e.bIt("click",function(){const t=e.eBV(l).$implicit,i=e.XpG();return e.Njj(i.deleteBanner(t._id))}),e.EFF(6," \u2715 "),e.k0s()()}if(2&o){const l=s.$implicit;e.R7$(),e.Y8G("appRemoveport",l.image_url),e.R7$(),e.Y8G("ngIf",0===l.type),e.R7$(),e.Y8G("ngIf",1===l.type),e.R7$(),e.Y8G("ngIf",3===l.type)}}const x=[{path:"",component:(()=>{var o;class s{constructor(n,t,i){this.loadingController=n,this.auth=t,this.modalController=i,this.bannnerImages=[]}ngOnInit(){console.log("BannerPage initialized")}ionViewDidEnter(){this.getBanners()}homeImageEvent(n){console.log(n.target.files),this.homeImage=n.target.files[0]}profileImageEvent(n){console.log(n.target.files),this.profileImage=n.target.files[0]}cartImageEvent(n){console.log(n.target.files),this.cartImage=n.target.files[0]}getBanners(){var n=this;return(0,p.A)(function*(){let t=yield n.loadingController.create({message:"Loading..."});var i;yield t.present(),n.auth.getAllBannerImageByType().subscribe({next:(i=(0,p.A)(function*(r){console.log(r),n.bannnerImages=r.data.content,yield t.dismiss()}),function(c){return i.apply(this,arguments)}),error:function(){var i=(0,p.A)(function*(r){console.log(r),yield t.dismiss()});return function(c){return i.apply(this,arguments)}}()})})()}isBannerTypeExists(n){return this.bannnerImages.some(t=>t.type===n)}deleteBanner(n){var t=this;return(0,p.A)(function*(){console.log(n);let i=yield t.loadingController.create({message:"Loading..."});var r;yield i.present(),t.auth.deleteBannerImage(n).subscribe({next:(r=(0,p.A)(function*(c){console.log(c),yield i.dismiss(),t.getBanners()}),function(g){return r.apply(this,arguments)}),error:function(){var r=(0,p.A)(function*(c){console.log(c),yield i.dismiss()});return function(g){return r.apply(this,arguments)}}()})})()}uploadBanner(n){var t=this;return(0,p.A)(function*(){let i=yield t.loadingController.create({message:"Loading..."});yield i.present();let r=new FormData;var c;console.log(n),console.log(typeof n),0==n?(r.append("type",n),r.append("image",t.homeImage,t.homeImage.name)):1==n?(r.append("type",n),r.append("image",t.cartImage,t.cartImage.name)):3==n&&(r.append("type",n),r.append("image",t.profileImage,t.profileImage.name)),console.log(r),t.auth.uploadBannerImage(r).subscribe({next:(c=(0,p.A)(function*(g){console.log(g),yield i.dismiss(),t.getBanners()}),function(E){return c.apply(this,arguments)}),error:function(){var c=(0,p.A)(function*(g){console.log(g),yield i.dismiss()});return function(E){return c.apply(this,arguments)}}()})})()}openImageModal(n){var t=this;return(0,p.A)(function*(){yield(yield t.modalController.create({component:v,componentProps:{imageUrl:n},cssClass:"image-modal"})).present()})()}}return(o=s).\u0275fac=function(n){return new(n||o)(e.rXU(a.Xi),e.rXU(b.u),e.rXU(a.W3))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-banner"]],decls:44,vars:6,consts:[[1,"ion-no-border",3,"translucent"],[3,"fullscreen"],["fixed",""],["size","6"],["type","file",3,"change"],["expand","block",3,"click","disabled"],["style","position: relative; display: inline-block; margin: 10px;",4,"ngFor","ngForOf"],[2,"position","relative","display","inline-block","margin","10px"],["crossorigin","anonymous","alt","",2,"width","150px","height","150px","object-fit","cover","border-radius","8px",3,"click","appRemoveport"],["style","position: absolute; top: 5px; left: 12px; background: #3880ff; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;",4,"ngIf"],[2,"position","absolute","top","5px","right","5px","background","#ff4d4d","color","white","width","24px","height","24px","border-radius","50%","font-size","16px","cursor","pointer","display","flex","align-items","center","justify-content","center",3,"click"],[2,"position","absolute","top","5px","left","12px","background","#3880ff","color","white","padding","2px 8px","border-radius","12px","font-size","12px"]],template:function(n,t){1&n&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Banner"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-grid",2)(6,"ion-row")(7,"ion-col",3)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-subtitle"),e.EFF(11,"This image is visible in Home Page."),e.k0s(),e.j41(12,"ion-card-title"),e.EFF(13,"Home Banner"),e.k0s()(),e.j41(14,"ion-card-content")(15,"input",4),e.bIt("change",function(r){return t.homeImageEvent(r)}),e.k0s(),e.j41(16,"ion-button",5),e.bIt("click",function(){return t.uploadBanner(0)}),e.EFF(17," Upload "),e.k0s()()(),e.j41(18,"ion-card")(19,"ion-card-header")(20,"ion-card-subtitle"),e.EFF(21,"This image is visible in the user cart page"),e.k0s(),e.j41(22,"ion-card-title"),e.EFF(23,"Cart Banner"),e.k0s()(),e.j41(24,"ion-card-content")(25,"input",4),e.bIt("change",function(r){return t.cartImageEvent(r)}),e.k0s(),e.j41(26,"ion-button",5),e.bIt("click",function(){return t.uploadBanner(1)}),e.EFF(27," Upload "),e.k0s()()(),e.j41(28,"ion-card")(29,"ion-card-header")(30,"ion-card-subtitle"),e.EFF(31,"This image is visible in user profile section."),e.k0s(),e.j41(32,"ion-card-title"),e.EFF(33,"Profile Banner"),e.k0s()(),e.j41(34,"ion-card-content")(35,"input",4),e.bIt("change",function(r){return t.profileImageEvent(r)}),e.k0s(),e.j41(36,"ion-button",5),e.bIt("click",function(){return t.uploadBanner(3)}),e.EFF(37," Upload "),e.k0s()()()(),e.j41(38,"ion-col",3)(39,"ion-list")(40,"ion-list-header")(41,"ion-label"),e.EFF(42,"All Banners"),e.k0s()(),e.DNE(43,F,7,4,"div",6),e.k0s()()()()()),2&n&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(12),e.Y8G("disabled",t.isBannerTypeExists(0)),e.R7$(10),e.Y8G("disabled",t.isBannerTypeExists(1)),e.R7$(10),e.Y8G("disabled",t.isBannerTypeExists(3)),e.R7$(7),e.Y8G("ngForOf",t.bannnerImages))},dependencies:[m.Sq,m.bT,a.Jm,a.b_,a.I9,a.ME,a.HW,a.tN,a.hU,a.W9,a.lO,a.eU,a.he,a.nf,a.AF,a.ln,a.BC,a.ai,h]}),s})()}];let k=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[f.iI.forChild(x),f.iI]}),s})(),P=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[m.MD,_.YN,a.bv,k]}),s})()}}]);