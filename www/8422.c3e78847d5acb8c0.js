"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8422],{8422:(C,h,u)=>{u.r(h),u.d(h,{SettingsPageModule:()=>_});var p=u(177),l=u(4341),o=u(4488),m=u(8986),a=u(467),e=u(4438),f=u(4796),y=u(6722);const v=[{path:"",component:(()=>{var s;class g{constructor(r,t,n,i,c){this.auth=r,this.loadingController=t,this.toastController=n,this.fb=i,this.http=c,this.deliveryOne={lower:1,upper:5},this.deliveryTwo={lower:5,upper:10},this.deliveryThree={lower:10,upper:15},this.handling="",this.gst="",this.id="",this.deliveryUpdateId="66a09811fc461cb7a5617384",this.bonusForm=this.fb.group({perDeliveryAmount:["",[l.k0.required,l.k0.min(0)]],bonus16thDelivery:["",[l.k0.required,l.k0.min(0)]],bonus21stDelivery:["",[l.k0.required,l.k0.min(0)]]})}ngOnInit(){}ionViewDidEnter(){this.getAllCharges(),this.getAllDeliveryCharges(),this.getBonusSettings()}getAllDeliveryCharges(){var t,r=this;this.auth.getDeliveryCharges().subscribe({next:(t=(0,a.A)(function*(n){console.log(n),r.deliveryOne={lower:n.data[0].range1MinKm,upper:n.data[0].range1MaxKm},r.deliveryPriceOne=n.data[0].range1Price,r.deliveryPriceTwo=n.data[0].range2Price,r.deliveryPriceThree=n.data[0].range3Price,r.deliveryTwo={lower:n.data[0].range2MinKm,upper:n.data[0].range2MaxKm},r.deliveryThree={lower:n.data[0].range3MinKm,upper:n.data[0].range3MaxKm}}),function(i){return t.apply(this,arguments)}),error:function(){var t=(0,a.A)(function*(n){console.log(n.error)});return function(i){return t.apply(this,arguments)}}()})}getAllCharges(){var t,r=this;this.auth.getCharges().subscribe({next:(t=(0,a.A)(function*(n){console.log(n),r.id=n.data[0]._id,r.gst=n.data[0].gstPercentage,r.handling=n.data[0].platformFee,r.gstToggle=n.data[0].gstIsActive}),function(i){return t.apply(this,arguments)}),error:function(){var t=(0,a.A)(function*(n){console.log(n.error)});return function(i){return t.apply(this,arguments)}}()})}gstToggleEvent(r){var t;console.log(r.detail),this.auth.updateGstToggleStatus(r.detail.checked).subscribe({next:(t=(0,a.A)(function*(n){console.log(n)}),function(i){return t.apply(this,arguments)}),error:function(){var t=(0,a.A)(function*(n){console.log(n)});return function(i){return t.apply(this,arguments)}}()})}rangeChangeGST(r){console.log(r.detail.value),this.gst=r.detail.value}rangeChangeDeliveryOne(r){var t;console.log(r.detail.value),console.log(this.deliveryPriceOne),this.deliveryOne=r.detail.value,this.auth.updateDeliveryCharges({range1Price:this.deliveryPriceOne,range1MinKm:r.detail.value.lower,range1MaxKm:r.detail.value.upper},this.deliveryUpdateId).subscribe({next:(t=(0,a.A)(function*(n){console.log(n)}),function(i){return t.apply(this,arguments)}),error:function(){var t=(0,a.A)(function*(n){console.log(n)});return function(i){return t.apply(this,arguments)}}()})}rangeChangeDeliveryTwo(r){var t;console.log(r.detail.value),console.log(this.deliveryPriceTwo),this.deliveryTwo=r.detail.value,this.auth.updateDeliveryCharges({range2Price:this.deliveryPriceTwo,range2MinKm:r.detail.value.lower,range2MaxKm:r.detail.value.upper},this.deliveryUpdateId).subscribe({next:(t=(0,a.A)(function*(n){console.log(n)}),function(i){return t.apply(this,arguments)}),error:function(){var t=(0,a.A)(function*(n){console.log(n)});return function(i){return t.apply(this,arguments)}}()})}rangeChangeDeliveryThree(r){var t;console.log(r.detail.value),console.log(this.deliveryPriceThree),this.deliveryThree=r.detail.value,this.auth.updateDeliveryCharges({range3Price:this.deliveryPriceThree,range3MinKm:r.detail.value.lower,range3MaxKm:r.detail.value.upper},this.deliveryUpdateId).subscribe({next:(t=(0,a.A)(function*(n){console.log(n)}),function(i){return t.apply(this,arguments)}),error:function(){var t=(0,a.A)(function*(n){console.log(n)});return function(i){return t.apply(this,arguments)}}()})}rangeChangeHandling(r){console.log(r.detail.value),this.handling=r.detail.value}onSubmit(){var r=this;return(0,a.A)(function*(){var t;r.auth.updateCharges(r.handling,r.gst,r.id).subscribe({next:(t=(0,a.A)(function*(n){console.log(n),r.getAllCharges()}),function(i){return t.apply(this,arguments)}),error:function(){var t=(0,a.A)(function*(n){console.log(n.error)});return function(i){return t.apply(this,arguments)}}()})})()}getBonusSettings(){this.http.getPerOrderEarnings().subscribe({next:r=>{console.log(r),this.bonusForm.patchValue({perDeliveryAmount:r.perDeliveryAmount,bonus16thDelivery:r.bonus16thDelivery,bonus21stDelivery:r.bonus21stDelivery})},error:r=>{console.error("Error fetching bonus settings:",r),this.showToast("Failed to load bonus settings","danger")}})}updateBonusSettings(){var r=this;return(0,a.A)(function*(){if(r.bonusForm.invalid)return void r.showToast("Please fill all fields correctly","warning");const t=yield r.loadingController.create({message:"Updating bonus settings..."});var n;yield t.present(),r.http.updatePerOrderEarnings(r.bonusForm.value).subscribe({next:(n=(0,a.A)(function*(i){yield t.dismiss(),r.showToast("Bonus settings updated successfully","success")}),function(c){return n.apply(this,arguments)}),error:function(){var n=(0,a.A)(function*(i){yield t.dismiss(),console.error("Error updating bonus settings:",i),r.showToast("Failed to update bonus settings","danger")});return function(c){return n.apply(this,arguments)}}()})})()}showToast(r,t){var n=this;return(0,a.A)(function*(){yield(yield n.toastController.create({message:r,duration:2e3,color:t,position:"top"})).present()})()}}return(s=g).\u0275fac=function(r){return new(r||s)(e.rXU(f.u),e.rXU(o.Xi),e.rXU(o.K_),e.rXU(l.ok),e.rXU(y.k))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-settings"]],decls:82,vars:18,consts:[[1,"ion-no-border",3,"translucent"],[3,"fullscreen"],[1,"ion-padding"],["type","number","placeholder","Price",3,"ngModelChange","ngModel"],["min","1","max","50","dualKnobs","true","pin","true","snaps","true","step","1","ticks","true","color","primary",3,"ionChange","value"],["slot","start"],["slot","end"],["min","1","max","100","dualKnobs","false","pin","true","snaps","true","step","1","ticks","true","color","primary",3,"ionChange","value"],["slot","end",3,"ionChange","checked"],["min","1","max","30","dualKnobs","false","pin","true","snaps","true","step","1","ticks","true","color","primary",3,"ionChange","value"],["expand","block",3,"click"],[3,"formGroup"],["position","stacked"],["type","number","formControlName","perDeliveryAmount","placeholder","Enter amount"],["type","number","formControlName","bonus16thDelivery","placeholder","Enter bonus amount"],["type","number","formControlName","bonus21stDelivery","placeholder","Enter bonus amount"],["expand","block",1,"mt-3",3,"click"]],template:function(r,t){1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Settings"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-card",2)(6,"ion-card-header")(7,"ion-card-title"),e.EFF(8),e.nI1(9,"currency"),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label"),e.EFF(12,"Price"),e.k0s(),e.j41(13,"ion-input",3),e.mxI("ngModelChange",function(i){return e.DH7(t.deliveryPriceOne,i)||(t.deliveryPriceOne=i),i}),e.k0s()(),e.j41(14,"ion-range",4),e.bIt("ionChange",function(i){return t.rangeChangeDeliveryOne(i)}),e.j41(15,"ion-label",5),e.EFF(16,"1"),e.k0s(),e.j41(17,"ion-label",6),e.EFF(18,"50"),e.k0s()(),e.nrm(19,"br"),e.j41(20,"ion-item")(21,"ion-label"),e.EFF(22,"Price"),e.k0s(),e.j41(23,"ion-input",3),e.mxI("ngModelChange",function(i){return e.DH7(t.deliveryPriceTwo,i)||(t.deliveryPriceTwo=i),i}),e.k0s()(),e.j41(24,"ion-range",4),e.bIt("ionChange",function(i){return t.rangeChangeDeliveryTwo(i)}),e.j41(25,"ion-label",5),e.EFF(26,"1"),e.k0s(),e.j41(27,"ion-label",6),e.EFF(28,"50"),e.k0s()(),e.nrm(29,"br"),e.j41(30,"ion-item")(31,"ion-label"),e.EFF(32,"Price"),e.k0s(),e.j41(33,"ion-input",3),e.mxI("ngModelChange",function(i){return e.DH7(t.deliveryPriceThree,i)||(t.deliveryPriceThree=i),i}),e.k0s()(),e.j41(34,"ion-range",4),e.bIt("ionChange",function(i){return t.rangeChangeDeliveryThree(i)}),e.j41(35,"ion-label",5),e.EFF(36,"1"),e.k0s(),e.j41(37,"ion-label",6),e.EFF(38,"50"),e.k0s()()(),e.j41(39,"ion-card",2)(40,"ion-card-header")(41,"ion-card-title"),e.EFF(42),e.k0s()(),e.j41(43,"ion-range",7),e.bIt("ionChange",function(i){return t.rangeChangeHandling(i)}),e.j41(44,"ion-label",5),e.EFF(45,"1"),e.k0s(),e.j41(46,"ion-label",6),e.EFF(47,"100"),e.k0s()()(),e.j41(48,"ion-card",2)(49,"ion-card-header")(50,"ion-card-title"),e.EFF(51),e.k0s(),e.j41(52,"ion-item")(53,"ion-label"),e.EFF(54,"Gst Enabled? "),e.k0s(),e.j41(55,"ion-toggle",8),e.bIt("ionChange",function(i){return t.gstToggleEvent(i)}),e.k0s()()(),e.j41(56,"ion-range",9),e.bIt("ionChange",function(i){return t.rangeChangeGST(i)}),e.j41(57,"ion-label",5),e.EFF(58,"1"),e.k0s(),e.j41(59,"ion-label",6),e.EFF(60,"30"),e.k0s()()(),e.j41(61,"ion-button",10),e.bIt("click",function(){return t.onSubmit()}),e.EFF(62," Update Charges "),e.k0s(),e.j41(63,"ion-card",2)(64,"ion-card-header")(65,"ion-card-title"),e.EFF(66,"Delivery Bonus Settings"),e.k0s()(),e.j41(67,"form",11)(68,"ion-item")(69,"ion-label",12),e.EFF(70,"Per Delivery Amount (\u20b9)"),e.k0s(),e.nrm(71,"ion-input",13),e.k0s(),e.j41(72,"ion-item")(73,"ion-label",12),e.EFF(74,"16th Delivery Bonus (\u20b9)"),e.k0s(),e.nrm(75,"ion-input",14),e.k0s(),e.j41(76,"ion-item")(77,"ion-label",12),e.EFF(78,"21st Delivery Bonus (\u20b9)"),e.k0s(),e.nrm(79,"ion-input",15),e.k0s(),e.j41(80,"ion-button",16),e.bIt("click",function(){return t.updateBonusSettings()}),e.EFF(81," Update Bonus Settings "),e.k0s()()()()),2&r&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(4),e.SpI("Delivery Charges ",e.i5U(9,15,100,"INR"),""),e.R7$(5),e.R50("ngModel",t.deliveryPriceOne),e.R7$(),e.Y8G("value",t.deliveryOne),e.R7$(9),e.R50("ngModel",t.deliveryPriceTwo),e.R7$(),e.Y8G("value",t.deliveryTwo),e.R7$(9),e.R50("ngModel",t.deliveryPriceThree),e.R7$(),e.Y8G("value",t.deliveryThree),e.R7$(8),e.SpI("Platform Handling Charges ",t.handling,"%"),e.R7$(),e.Y8G("value",t.handling),e.R7$(8),e.SpI("GST Charges ",t.gst,"% "),e.R7$(4),e.Y8G("checked",t.gstToggle),e.R7$(),e.Y8G("value",t.gst),e.R7$(11),e.Y8G("formGroup",t.bonusForm))},dependencies:[l.qT,l.BC,l.cb,l.vS,o.Jm,o.b_,o.ME,o.tN,o.W9,o.eU,o.$w,o.uz,o.he,o.Ob,o.BC,o.BY,o.ai,o.hB,o.su,o.Gw,l.j4,l.JD,p.oe]}),g})()}];let b=(()=>{var s;class g{}return(s=g).\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[m.iI.forChild(v),m.iI]}),g})(),_=(()=>{var s;class g{}return(s=g).\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[p.MD,l.YN,o.bv,l.X1,b]}),g})()}}]);